<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Plataforma de estudio para el Examen de Auxiliar de Farmacia en Chile.">
    <title>Auxiliar Pro | Credencial 2026</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5783669972264868" crossorigin="anonymous"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'aux-dark': '#0E172A',   // Azul Oscuro
              'aux-green': '#2A9974',  // Verde Teal
              'aux-gray': '#BDC3C1',
              'aux-light': '#F8FAFC',
            },
            fontFamily: { sans: ['Inter', 'sans-serif'] },
            animation: { 'fade-in': 'fadeIn 0.3s ease-out forwards' },
            keyframes: { fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } } }
          }
        }
      }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body { -webkit-tap-highlight-color: transparent; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      
      /* Estilo Sello de Agua */
      .watermark-container {
          position: relative;
          overflow: hidden;
          background-color: rgba(42, 153, 116, 0.03);
          border: 1px solid rgba(42, 153, 116, 0.1);
      }
      .watermark-icon {
          position: absolute;
          font-weight: 900;
          opacity: 0.06;
          color: #2A9974;
          z-index: 0;
          pointer-events: none;
      }
      
      /* Estilos HTML renderizado */
      .html-content a { color: #2A9974; text-decoration: none; font-weight: 600; }
      .html-content ul { list-style-type: disc; padding-left: 1.2rem; margin-top: 0.5rem; }
      .html-content li { margin-bottom: 0.25rem; }
      .html-content h1 { font-size: 1.5rem; font-weight: 800; color: #0E172A; margin-bottom: 1rem; line-height: 1.2; }
      .html-content h2 { font-size: 1.25rem; font-weight: 700; color: #0E172A; margin-top: 1.5rem; margin-bottom: 0.75rem; }
      .html-content p { margin-bottom: 1rem; color: #475569; }
    </style>
</head>
<body class="bg-white text-aux-dark antialiased min-h-screen flex flex-col items-center justify-center font-sans">

    <div id="root" class="w-full h-full flex justify-center items-center"></div>

    <script type="text/babel" data-type="module" data-presets="react">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

        // CONFIGURACI√ìN FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyDNhuSBBhmmQSV0BHC8MOtLKgAUpvtfWfE",
            authDomain: "auxiliar-pro.firebaseapp.com",
            projectId: "auxiliar-pro",
            storageBucket: "auxiliar-pro.firebasestorage.app",
            messagingSenderId: "342196612566",
            appId: "1:342196612566:web:c7f34365c4e10502e60877"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'auxiliar-pro';

        const { useState, useEffect } = React;
        const LOCAL_STORAGE_KEY = 'auxiliar_pro_data';
        
        // --- URLs ---
        // CORRECCI√ìN: Nombre de archivo actualizado a logo_auxiliarpro_3_400x240_ajustado.png
        const LOGO_URL = "https://raw.githubusercontent.com/marcar1972-cyber/Auxiliar--pro/main/logo_auxiliarpro_3_400x240_ajustado.png";
        const DERMO_URL = "https://auxiliar-dermocheck.vercel.app";

        // --- DATOS ---
        const BLOG_POSTS = [
            {
                id: 'art_req_2026',
                date: '09 DIC',
                category: 'Gu√≠a',
                title: 'Requisitos para ser Auxiliar de Farmacia en Chile (Actualizado 2026)',
                excerpt: 'Si est√°s pensando en trabajar en farmacia, conoce los requisitos, la experiencia necesaria y el proceso ante la SEREMI para obtener tu credencial.',
                content: `
                    <h1>Requisitos para ser Auxiliar de Farmacia en Chile (Actualizado 2026)</h1>
                    <p>Si est√°s pensando en trabajar en farmacia, uno de los primeros pasos es conocer los requisitos para ser Auxiliar de Farmacia en Chile. Esta es una de las b√∫squedas m√°s comunes en Google, y con raz√≥n: es una puerta de entrada real al rubro de la salud. Aqu√≠ te lo explico simple, claro y sin enredos.</p>
                    
                    <h2>ü©∫ ¬øQu√© es un Auxiliar de Farmacia?</h2>
                    <p>El Auxiliar de Farmacia es la persona que apoya al Qu√≠mico Farmac√©utico en la atenci√≥n de p√∫blico, manejo de medicamentos, control de stock, revisi√≥n de vencimientos y orientaci√≥n b√°sica al paciente, siempre bajo supervisi√≥n profesional.</p>
                    
                    <h2>üìã Requisitos para Rendir el Examen</h2>
                    <p>De acuerdo al <strong>Decreto Supremo N¬∞ 466</strong>, para poder rendir el Examen de Auxiliar de Farmacia debes cumplir con el siguiente requisito principal:</p>
                    
                    <div class="bg-emerald-50 p-4 rounded-lg border-l-4 border-aux-green my-4">
                        <strong>‚úÖ M√≠nimo 1 a√±o de experiencia laboral comprobable en farmacia, realizando labores como:</strong>
                        <ul class="list-disc pl-5 mt-2 space-y-1 text-slate-700">
                            <li>Bodegaje</li>
                            <li>Reposici√≥n de medicamentos</li>
                            <li>Dispensaci√≥n bajo supervisi√≥n</li>
                            <li>Manejo de productos farmac√©uticos</li>
                        </ul>
                    </div>
                    
                    <p>Toda esta experiencia debe estar certificada por el <strong>Qu√≠mico Farmac√©utico Director T√©cnico</strong> del establecimiento.</p>
                    <p>El tr√°mite oficial se realiza √∫nicamente a trav√©s del portal del Ministerio de Salud en <a href="https://seremienlinea.minsal.cl/asdigital/" target="_blank" class="text-aux-green font-bold underline">SEREMI en L√≠nea</a>, donde podr√°s revisar requisitos actualizados, costos y disponibilidad.</p>
                    <p>Este proceso es fundamental para obtener la credencial oficial de Auxiliar de Farmacia en Chile y poder trabajar legalmente en farmacias comunitarias.</p>
                    
                    <h2>üìã Requisitos Generales (2026)</h2>
                    <p>Seg√∫n la normativa vigente del Ministerio de Salud y el Decreto 466, estos son los requisitos generales:</p>
                    <ul class="space-y-3 mt-2">
                        <li><strong>‚úÖ 1. Ser mayor de 18 a√±os</strong>: Debes ser legalmente mayor de edad.</li>
                        <li><strong>‚úÖ 2. Ense√±anza media completa</strong>: Debes contar con tu licencia de cuarto medio aprobada.</li>
                        <li><strong>‚úÖ 3. Haber trabajado en farmacia</strong>: Debes acreditar experiencia pr√°ctica en una farmacia, bajo supervisi√≥n de un Qu√≠mico Farmac√©utico.</li>
                        <li><strong>‚úÖ 4. Rendir y aprobar el examen</strong>: Eval√∫a conocimientos como Farmacolog√≠a b√°sica, Recetas m√©dicas, Cadena de fr√≠o, etc.</li>
                        <li><strong>‚úÖ 5. Obtener la credencial</strong>: Una vez aprobado el examen, la SEREMI entrega la credencial oficial.</li>
                    </ul>

                    <h2>üè• ¬øD√≥nde se realiza el tr√°mite?</h2>
                    <p>Todo el proceso se gestiona a trav√©s de la SEREMI de Salud de tu regi√≥n. Cada regi√≥n puede variar levemente en exigencias de documentos, pero la base legal es la misma en todo Chile.</p>

                    <h2>üìö ¬øPuedo prepararme sin instituto?</h2>
                    <p>S√≠. Puedes estudiar de forma independiente, usar material online y prepararte con gu√≠as y ensayos. Muchos auxiliares actuales se han preparado as√≠.</p>

                    <div class="mt-6 p-4 bg-slate-100 rounded-lg">
                        <h3 class="font-bold text-aux-dark mb-2">üéØ Conclusi√≥n clara</h3>
                        <p>Si quieres ser Auxiliar de Farmacia en Chile el 2026, necesitas:</p>
                        <ul class="list-disc pl-5 mt-2 space-y-1 text-slate-700">
                            <li>Cuarto medio</li>
                            <li>M√≠nimo 1 a√±o de experiencia en farmacia</li>
                            <li>Aprobar el examen</li>
                            <li>Obtener tu credencial SEREMI</li>
                        </ul>
                        <p class="mt-2 text-sm font-medium">No es imposible, pero s√≠ requiere constancia, pr√°ctica real y estudio enfocado.</p>
                    </div>
                `
            },
            {
                id: 'art_dif_tecnico',
                date: '09 DIC',
                category: 'Orientaci√≥n',
                title: 'Diferencia entre Auxiliar de Farmacia y T√©cnico en Farmacia (Explicado F√°cil)',
                excerpt: 'Aunque ambos trabajan en farmacias, no son lo mismo. Descubre las diferencias en funciones, estudios y responsabilidades legales.',
                content: `
                    <h1>Diferencia entre Auxiliar de Farmacia y T√©cnico en Farmacia</h1>
                    <p>Una de las dudas m√°s comunes entre quienes quieren trabajar en farmacia es esta: <strong>¬øCu√°l es la diferencia entre Auxiliar de Farmacia y T√©cnico en Farmacia?</strong></p>
                    <p>Aunque ambos trabajan en farmacias, no son lo mismo, tienen distintas funciones, formaci√≥n y responsabilidades legales. Aqu√≠ te lo explico claro y sin enredos.</p>
                    
                    <h2>ü©∫ ¬øQu√© es un Auxiliar de Farmacia?</h2>
                    <p>El Auxiliar de Farmacia es la persona que trabaja en farmacia apoyando al Qu√≠mico Farmac√©utico, principalmente en:</p>
                    <ul class="list-disc pl-5 mt-2 space-y-1 text-slate-700">
                        <li>Atenci√≥n de p√∫blico</li>
                        <li>Dispensaci√≥n de medicamentos bajo supervisi√≥n</li>
                        <li>Reposici√≥n y bodegaje</li>
                        <li>Revisi√≥n de fechas de vencimiento</li>
                        <li>Manejo de stock y orientaci√≥n b√°sica al paciente</li>
                    </ul>
                    
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500 my-4">
                        <strong>üëâ Dato Clave:</strong>
                        <p class="mt-1 text-sm">En Chile, el Auxiliar no necesita estudiar en instituto, pero s√≠ debe tener 1 a√±o de experiencia y aprobar el examen de la SEREMI (Decreto 466).</p>
                    </div>

                    <h2>üéì ¬øQu√© es un T√©cnico en Farmacia?</h2>
                    <p>El T√©cnico en Farmacia es un profesional que s√≠ estudia una carrera formal, generalmente en institutos profesionales durante 2 a 3 a√±os, con t√≠tulo t√©cnico.</p>
                    <p class="mt-2">Sus funciones incluyen:</p>
                    <ul class="list-disc pl-5 mt-2 space-y-1 text-slate-700">
                        <li>Apoyo t√©cnico directo al Qu√≠mico Farmac√©utico</li>
                        <li>Preparaci√≥n de medicamentos</li>
                        <li>Control de bodegas e inventarios</li>
                        <li>Atenci√≥n cl√≠nica b√°sica</li>
                    </ul>
                    <p class="mt-2 text-sm font-bold text-aux-dark">üëâ El T√©cnico NO rinde examen en la SEREMI, su t√≠tulo lo habilita directamente.</p>

                    <h2>üìã Diferencias Claves</h2>
                    <div class="overflow-x-auto my-4 border rounded-lg">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-aux-dark text-white">
                                <tr>
                                    <th class="p-3">Auxiliar</th>
                                    <th class="p-3">T√©cnico</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200">
                                <tr><td class="p-3">No estudia carrera formal</td><td class="p-3">Estudia 2-3 a√±os</td></tr>
                                <tr><td class="p-3">Aprende trabajando</td><td class="p-3">Formaci√≥n acad√©mica</td></tr>
                                <tr><td class="p-3">Rinde examen SEREMI</td><td class="p-3">No rinde examen</td></tr>
                                <tr><td class="p-3">Funciones b√°sicas</td><td class="p-3">Funciones t√©cnicas</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>üí¨ ¬øCu√°l es mejor?</h2>
                    <p>No es que uno sea ‚Äúmejor‚Äù que otro. Todo depende de tu situaci√≥n:</p>
                    <ul class="space-y-2 mt-2">
                        <li>üëâ <strong>Si quieres entrar r√°pido:</strong> El camino de Auxiliar es m√°s directo (experiencia + examen).</li>
                        <li>üëâ <strong>Si buscas formaci√≥n acad√©mica:</strong> El camino es el T√©cnico (instituto + t√≠tulo).</li>
                    </ul>

                    <div class="mt-6 p-4 bg-slate-100 rounded-lg">
                        <h3 class="font-bold text-aux-dark mb-2">üéØ Conclusi√≥n Clara</h3>
                        <p>Ambos son fundamentales para el funcionamiento de la farmacia y ambos trabajan bajo la supervisi√≥n del Qu√≠mico Farmac√©utico.</p>
                    </div>
                    <p class="text-xs text-slate-400 mt-6 italic">Palabras clave: Auxiliar de Farmacia en Chile, T√©cnico en Farmacia Chile, diferencia entre auxiliar y t√©cnico, examen auxiliar de farmacia, credencial auxiliar.</p>
                `
            }
        ];

        const FAQS = [
            {
                q: "Descripci√≥n del Tr√°mite",
                a: "Es la solicitud formal ante la SEREMI de Salud para obtener la autorizaci√≥n sanitaria que te permite trabajar legalmente como Auxiliar de Farmacia. Consiste en validar tus antecedentes y rendir un examen de competencias. Una vez aprobado, obtienes tu resoluci√≥n y credencial."
            },
            {
                q: "¬øD√≥nde hago el tr√°mite?",
                a: "Actualmente se realiza de forma digital en <a href='https://seremienlinea.minsal.cl' target='_blank' class='font-bold text-aux-green hover:underline'>seremienlinea.minsal.cl</a>. Debes ingresar con tu Clave√önica, buscar 'Autorizaci√≥n de Auxiliar de Farmacia', adjuntar tus documentos escaneados y pagar el arancel correspondiente."
            },
            {
                q: "Requisitos Obligatorios",
                a: "Debes cumplir con: <ul class='list-disc pl-5 mt-2 space-y-1'><li>Ser mayor de 18 a√±os.</li><li>Licencia de Ense√±anza Media completa.</li><li><strong>Certificado de experiencia laboral:</strong> M√≠nimo 1 a√±o trabajado en farmacia, firmado por el Qu√≠mico Farmac√©utico (Director T√©cnico).</li><li>Certificado de antecedentes para fines especiales.</li></ul>"
            },
            {
                q: "Costos Asociados",
                a: "Los valores dependen de la UTM mensual, pero aproximadamente son:<br/><br/><strong>1. Derecho a Examen:</strong> ~$19.100 (aprox). Se paga para rendir la prueba.<br/><strong>2. Registro y Credencial:</strong> ~$47.600 (aprox). Se paga una vez que apruebas para que te entreguen el carnet.<br/><br/><em>*Precios referenciales sujetos a cambio por la SEREMI.</em>"
            }
        ];

        // --- ENLACES ACTUALIZADOS A GITHUB ---
        const PDF_DOCS = [
            { title: 'Ley 20.724 (F√°rmacos)', file: 'https://raw.githubusercontent.com/marcar1972-cyber/Auxiliar--pro/main/ley_20724.pdf' },
            { title: 'Decreto 466 (Farmacias)', file: 'https://raw.githubusercontent.com/marcar1972-cyber/Auxiliar--pro/main/decreto_466.pdf' },
            { title: 'Decreto 404 (Estupefacientes)', file: 'https://raw.githubusercontent.com/marcar1972-cyber/Auxiliar--pro/main/decreto_404.pdf' },
            { title: 'Decreto 405 (Psicotr√≥picos)', file: 'https://raw.githubusercontent.com/marcar1972-cyber/Auxiliar--pro/main/decreto_405.pdf' },
            { title: 'Gu√≠a Maestra de Posolog√≠a', file: 'https://raw.githubusercontent.com/marcar1972-cyber/Auxiliar--pro/main/Gu√≠a%20Maestra%20de%20Posolog√≠a.pdf' }
        ];

        // --- L√ìGICA DE NIVELES ACTUALIZADA (CONTENIDO REAL) ---
        const LEVELS = [
            { 
                id: 1, 
                title: 'Prueba Diagn√≥stico', 
                desc: 'Conceptos b√°sicos.', 
                iconBg: 'bg-orange-500', 
                qCount: 10, 
                passingScore: 6,
                failureFeedback: 'Revisa conceptos generales de farmacia y cadena de fr√≠o.', 
                questions: [
                    { id: 101, text: '¬øQui√©n es el responsable t√©cnico de una farmacia?', options: ['El Due√±o', 'El Auxiliar', 'El Qu√≠mico Farmac√©utico', 'El Gerente'], correctIndex: 2 }, 
                    { id: 102, text: '¬øCu√°l es el rango de temperatura para la cadena de fr√≠o?', options: ['0¬∞C a 5¬∞C', '2¬∞C a 8¬∞C', '8¬∞C a 15¬∞C', 'Temperatura Ambiente'], correctIndex: 1 },
                    { id: 103, text: '¬øQu√© significa OTC?', options: ['Medicamento con receta', 'Venta directa (Over The Counter)', 'Medicamento controlado', 'Uso hospitalario'], correctIndex: 1 },
                    { id: 104, text: '¬øCu√°l es la funci√≥n principal de la farmacia?', options: ['Vender regalos', 'Dispensaci√≥n informada de salud', 'Diagnosticar enfermedades', 'Solo bodega'], correctIndex: 1 },
                    { id: 105, text: '¬øQu√© es el ISP?', options: ['Instituto de Salud P√∫blica', 'Instituci√≥n Sanitaria Privada', 'Inspecci√≥n de Salud P√∫blica', 'Instituto Superior de Patolog√≠a'], correctIndex: 0 },
                    { id: 106, text: '¬øD√≥nde se debe almacenar la insulina?', options: ['En estanter√≠a', 'En el refrigerador', 'En el congelador', 'En caja fuerte'], correctIndex: 1 },
                    { id: 107, text: 'Un medicamento gen√©rico se identifica por:', options: ['Nombre de fantas√≠a', 'Nombre del principio activo', 'El color de la caja', 'El precio m√°s alto'], correctIndex: 1 },
                    { id: 108, text: '¬øQui√©n autoriza el funcionamiento de una farmacia?', options: ['La Municipalidad', 'El ISP', 'La SEREMI de Salud', 'Carabineros'], correctIndex: 2 },
                    { id: 109, text: '¬øQu√© significa FEFO?', options: ['Primero en vencer, primero en salir', 'Farmacia Especial', 'Fecha Final', 'Formulario Estatal'], correctIndex: 0 },
                    { id: 110, text: 'El auxiliar de farmacia trabaja bajo supervisi√≥n de:', options: ['El cliente', 'El Q.F.', 'El cajero', 'Nadie'], correctIndex: 1 }
                ] 
            },
            { 
                id: 2, 
                title: 'Nivel Intermedio', 
                desc: 'Legislaci√≥n D.S. 466.', 
                iconBg: 'bg-slate-400', 
                qCount: 15, 
                passingScore: 11,
                failureFeedback: 'Estudia el D.S. 466: Funciones del DT, Petitorio M√≠nimo y condiciones ambientales.',
                questions: [
                    { id: 201, text: 'Seg√∫n el D.S. 466, la direcci√≥n t√©cnica de una farmacia debe ser ejercida por:', options: ['Auxiliar de Farmacia', 'T√©cnico en Enfermer√≠a', 'Qu√≠mico Farmac√©utico', 'M√©dico Cirujano'], correctIndex: 2 },
                    { id: 202, text: '¬øCu√°l es la temperatura m√°xima ambiental permitida en la sala de ventas?', options: ['20¬∞C', '25¬∞C', '30¬∞C', '18¬∞C'], correctIndex: 1 },
                    { id: 203, text: 'Si el Director T√©cnico se ausenta, ¬øqui√©n lo reemplaza?', options: ['El Auxiliar con m√°s experiencia', 'El Due√±o de la Farmacia', 'Otro Qu√≠mico Farmac√©utico', 'La farmacia cierra'], correctIndex: 2 },
                    { id: 204, text: '¬øQu√© es el Petitorio Farmac√©utico?', options: ['Lista de deseos del personal', 'Lista de medicamentos obligatorios en la farmacia', 'Lista de clientes frecuentes', 'Inventario de limpieza'], correctIndex: 1 },
                    { id: 205, text: 'Los libros de control (o sistema electr√≥nico) deben estar:', options: ['Guardados en bodega', 'Al d√≠a y foliados', 'En casa del DT', 'Solo disponibles para el due√±o'], correctIndex: 1 },
                    { id: 206, text: '¬øCu√°nto tiempo debe conservarse una receta retenida en la farmacia?', options: ['1 mes', '6 meses', '1 a√±o', '5 a√±os'], correctIndex: 2 },
                    { id: 207, text: 'La venta de medicamentos debe ser realizada:', options: ['Por cualquier persona', 'Por personal auxiliar bajo supervisi√≥n del QF', 'Solo por m√°quinas dispensadoras', 'Por personal de aseo'], correctIndex: 1 },
                    { id: 208, text: '¬øQu√© prohibe expresamente el D.S. 466 sobre la publicidad?', options: ['Poner precios', 'Inducir al consumo irracional', 'Tener p√°gina web', 'Usar colores llamativos'], correctIndex: 1 },
                    { id: 209, text: 'Los medicamentos deben almacenarse:', options: ['Directo en el suelo', 'Sobre tarimas o estantes', 'Expuestos al sol', 'Mezclados con alimentos'], correctIndex: 1 },
                    { id: 210, text: '¬øQui√©n fiscaliza el cumplimiento del D.S. 466?', options: ['Sernac', 'Instituto de Salud P√∫blica (ISP) y SEREMI', 'SII', 'Municipalidad'], correctIndex: 1 },
                    { id: 211, text: 'En una farmacia de turno, ¬øes obligatorio que est√© el QF?', options: ['No, solo el auxiliar', 'S√≠, presencialmente', 'Puede estar por tel√©fono', 'Solo si hay gente'], correctIndex: 1 },
                    { id: 212, text: '¬øQu√© es un preparado magistral?', options: ['Un medicamento industrial', 'Un medicamento preparado para un paciente espec√≠fico', 'Un remedio casero', 'Una muestra m√©dica'], correctIndex: 1 },
                    { id: 213, text: 'La cadena de fr√≠o se rompe si:', options: ['Se abre el refrigerador', 'La temperatura sube de 8¬∞C o baja de 2¬∞C', 'Se vende el producto', 'Se apaga la luz'], correctIndex: 1 },
                    { id: 214, text: '¬øLas farmacias pueden vender alimentos?', options: ['Cualquier alimento', 'No, est√° prohibido', 'Solo alimentos para fines m√©dicos y suplementos', 'Solo dulces'], correctIndex: 2 },
                    { id: 215, text: '¬øQu√© identificaci√≥n debe portar el personal?', options: ['C√©dula de identidad', 'Credencial con nombre y cargo', 'No es necesario', 'Solo el uniforme'], correctIndex: 1 }
                ]
            },
            { 
                id: 3, 
                title: 'Nivel Avanzado', 
                desc: 'Controlados D.S. 404/405.', 
                iconBg: 'bg-yellow-500', 
                qCount: 25, 
                passingScore: 20, 
                failureFeedback: 'Repasa D.S. 404/405: Diferencia entre Receta Cheque y Retenida, y plazos de validez.',
                questions: [
                    { id: 301, text: 'El D.S. 404 regula:', options: ['Psicotr√≥picos', 'Estupefacientes', 'Cosm√©ticos', 'Alimentos'], correctIndex: 1 },
                    { id: 302, text: 'El D.S. 405 regula:', options: ['Estupefacientes', 'Productos Psicotr√≥picos', 'Insumos m√©dicos', 'Homeopat√≠a'], correctIndex: 1 },
                    { id: 303, text: '¬øQu√© receta se usa para estupefacientes?', options: ['Receta Simple', 'Receta Retenida', 'Receta Cheque', 'Orden M√©dica'], correctIndex: 2 },
                    { id: 304, text: '¬øCu√°l es la validez de una Receta Cheque?', options: ['60 d√≠as', '30 d√≠as corridos', '1 a√±o', 'Indefinida'], correctIndex: 1 },
                    { id: 305, text: 'La "Estrella Verde" en el envase indica:', options: ['Producto natural', 'Psicotr√≥pico', 'Estupefaciente', 'Venta libre'], correctIndex: 1 },
                    { id: 306, text: 'La "Estrella Roja" en el envase indica:', options: ['Psicotr√≥pico', 'Estupefaciente', 'T√≥xico', 'Inflamable'], correctIndex: 1 },
                    { id: 307, text: '¬øD√≥nde se guardan los estupefacientes?', options: ['Estanter√≠a general', 'Mueble bajo llave (armario de seguridad)', 'Refrigerador', 'Bodega abierta'], correctIndex: 1 },
                    { id: 308, text: '¬øQui√©n tiene la llave del armario de controlados?', options: ['Cualquier auxiliar', 'El cajero', 'Responsabilidad exclusiva del QF', 'El guardia'], correctIndex: 2 },
                    { id: 309, text: '¬øQu√© benzodiacepina es sujeta a control de stock?', options: ['Paracetamol', 'Clonazepam', 'Ibuprofeno', 'Loratadina'], correctIndex: 1 },
                    { id: 310, text: 'La receta retenida sin control de stock se archiva por:', options: ['No se archiva', '6 meses', '1 a√±o', '2 a√±os'], correctIndex: 2 },
                    { id: 311, text: 'El Clonazepam se vende con:', options: ['Receta Simple', 'Receta Cheque', 'Receta Retenida con control de stock', 'Venta Directa'], correctIndex: 2 },
                    { id: 312, text: 'La Morfina requiere:', options: ['Receta Simple', 'Receta Cheque', 'Receta Retenida', 'Ninguna'], correctIndex: 1 },
                    { id: 313, text: '¬øQu√© dato es OBLIGATORIO en la receta cheque?', options: ['RUT del m√©dico y paciente', 'Color favorito', 'Hora de atenci√≥n', 'Marca del l√°piz'], correctIndex: 0 },
                    { id: 314, text: 'Si se vence un estupefaciente, ¬øqu√© se hace?', options: ['Se bota a la basura', 'Se devuelve al laboratorio', 'Se da de baja ante la SEREMI (acta)', 'Se vende m√°s barato'], correctIndex: 2 },
                    { id: 315, text: '¬øQu√© es el Libro de Psicotr√≥picos?', options: ['Libro de reclamos', 'Registro oficial de ingresos y egresos de controlados', 'Libro de asistencia', 'Cuaderno de notas'], correctIndex: 1 },
                    { id: 316, text: 'La Sibutramina y Fentermina son:', options: ['Vitaminas', 'Anorex√≠genos controlados (Psicotr√≥picos)', 'Antibi√≥ticos', 'Analg√©sicos'], correctIndex: 1 },
                    { id: 317, text: '¬øPuede un auxiliar dispensar Receta Cheque sin el QF?', options: ['S√≠, si sabe leerla', 'No, es responsabilidad del QF validarla', 'Solo si hay mucha gente', 'S√≠, si es conocido'], correctIndex: 1 },
                    { id: 318, text: '¬øQu√© significa la banda negra en el envase?', options: ['Venta Directa', 'Uso exclusivo hospitalario', 'Peligro de muerte', 'Financiado por el estado'], correctIndex: 0 },
                    { id: 319, text: 'En una Receta Cheque, ¬øqui√©n llena los datos del adquirente?', options: ['El m√©dico', 'El paciente', 'El Farmac√©utico/Auxiliar al momento de la venta', 'Nadie'], correctIndex: 2 },
                    { id: 320, text: 'El Metilfenidato (Ritalin) se vende con:', options: ['Receta Simple', 'Receta Cheque', 'Receta Retenida', 'Sin Receta'], correctIndex: 1 },
                    { id: 321, text: '¬øCu√°ntas cajas m√°ximo se pueden vender por Receta Cheque?', options: ['Las que quiera', 'Solo 1', 'M√°ximo 2 (seg√∫n tratamiento)', 'Cajas ilimitadas'], correctIndex: 2 },
                    { id: 322, text: 'Si se pierde un talonario de Recetas Cheque, el m√©dico debe:', options: ['Comprar otro', 'Dar aviso a la SEREMI y Carabineros/PDI', 'No hacer nada', 'Usar recetas simples'], correctIndex: 1 },
                    { id: 323, text: 'El Tramadol es un medicamento:', options: ['De venta directa', 'Sujeto a control de venta (Receta Retenida)', 'Estupefaciente puro', 'Vitamina'], correctIndex: 1 },
                    { id: 324, text: '¬øQu√© pasa si la receta cheque tiene una enmienda no salvada?', options: ['Se acepta igual', 'Se rechaza', 'Se corrige con liquid', 'Se llama al m√©dico'], correctIndex: 1 },
                    { id: 325, text: 'Los saldos del libro de controlados deben coincidir con:', options: ['El stock f√≠sico real', 'Lo que dice el computador', 'Lo que dice la factura', 'Un aproximado'], correctIndex: 0 }
                ]
            },
            { 
                id: 4, 
                title: 'Simulacro Final', 
                desc: 'Examen Final.', 
                iconBg: 'bg-aux-dark', 
                qCount: 40, 
                passingScore: 32, 
                failureFeedback: 'No te rindas. Revisa Ley 20.724, Bioequivalencia y casos pr√°cticos. ¬°Est√°s cerca!',
                questions: [
                    { id: 401, text: '¬øQu√© ley es la Ley de F√°rmacos?', options: ['Ley 20.000', 'Ley 20.724', 'Ley 19.497', 'Ley de Tr√°nsito'], correctIndex: 1 },
                    { id: 402, text: 'La Bioequivalencia asegura que el gen√©rico tiene:', options: ['Mismo precio', 'Misma calidad, eficacia y seguridad que el innovador', 'Mejor envase', 'Sabor distinto'], correctIndex: 1 },
                    { id: 403, text: 'El logo de bioequivalencia es:', options: ['Una cruz roja', 'Una franja amarilla con letras rojas', 'Un c√≠rculo azul', 'Una estrella verde'], correctIndex: 1 },
                    { id: 404, text: 'La Ley de F√°rmacos obliga a tener disponible:', options: ['Solo medicamentos de marca', 'Medicamentos bioequivalentes (si existen)', 'Solo gen√©ricos', 'Suplementos'], correctIndex: 1 },
                    { id: 405, text: '¬øSe puede fraccionar un medicamento?', options: ['Nunca', 'S√≠, en farmacias inscritas y autorizadas para ello', 'S√≠, con una tijera en el mes√≥n', 'Solo si el cliente pide'], correctIndex: 1 },
                    { id: 406, text: 'La venta de antibi√≥ticos es con:', options: ['Receta Retenida', 'Venta Directa', 'Receta Simple', 'Sin restricci√≥n'], correctIndex: 0 },
                    { id: 407, text: '¬øQu√© es CENABAST?', options: ['Una farmacia privada', 'Central de Abastecimiento del SNSS', 'Un laboratorio', 'Un sindicato'], correctIndex: 1 },
                    { id: 408, text: '¬øPuede la farmacia incentivar la compra de una marca espec√≠fica?', options: ['S√≠, pagan comisi√≥n', 'No, est√° prohibida la canela (incentivos)', 'Solo si es bioequivalente', 'S√≠, si es m√°s caro'], correctIndex: 1 },
                    { id: 409, text: '¬øEl precio debe estar visible en la caja?', options: ['No es necesario', 'S√≠, es obligatorio por Ley de F√°rmacos', 'Solo en el sistema', 'Solo si est√° en oferta'], correctIndex: 1 },
                    { id: 410, text: 'Los almacenes farmac√©uticos se diferencian de la farmacia en que:', options: ['Venden de todo', 'Tienen un petitorio m√°s restringido y no hacen preparados', 'No tienen DT', 'Son ilegales'], correctIndex: 1 },
                    { id: 411, text: 'El "Principio Activo" es:', options: ['El excipiente', 'La sustancia responsable del efecto farmacol√≥gico', 'El colorante', 'La caja'], correctIndex: 1 },
                    { id: 412, text: 'Un medicamento "L√°bil" es aquel que:', options: ['Es muy fuerte', 'Se altera f√°cilmente (ej. por calor o luz)', 'No vence', 'Es barato'], correctIndex: 1 },
                    { id: 413, text: 'Las recetas magistrales tienen una validez de:', options: ['30 d√≠as', '40 d√≠as', 'Lo que dure el tratamiento', '1 a√±o'], correctIndex: 1 },
                    { id: 414, text: '¬øQu√© es la Farmacovigilancia?', options: ['Vigilar que no roben', 'Detecci√≥n y reporte de efectos adversos', 'Control de precios', 'Revisi√≥n de aseo'], correctIndex: 1 },
                    { id: 415, text: 'Si llega una receta ilegible, usted debe:', options: ['Adivinar', 'Preguntar al paciente qu√© toma', 'Solicitar al QF que la valide o rechazarla', 'Vender lo m√°s parecido'], correctIndex: 2 },
                    { id: 416, text: 'Los Corticoides orales se venden con:', options: ['Receta m√©dica', 'Venta directa', 'Sin restricci√≥n', 'Solo en hospitales'], correctIndex: 0 },
                    { id: 417, text: 'El Omeprazol es un:', options: ['Antibi√≥tico', 'Inhibidor de la bomba de protones (Antiulceroso)', 'Analg√©sico', 'Vitamina'], correctIndex: 1 },
                    { id: 418, text: '¬øQu√© significa v√≠a de administraci√≥n "Parenteral"?', options: ['Por la boca', 'Inyectable (IV, IM, SC)', 'Por la piel', 'Por el o√≠do'], correctIndex: 1 },
                    { id: 419, text: 'La Amoxicilina es:', options: ['Antimic√≥tico', 'Antibi√≥tico (Penicilina)', 'Antiviral', 'Antiparasitario'], correctIndex: 1 },
                    { id: 420, text: '¬øQu√© es un medicamento LASA?', options: ['Medicamentos que suenan o se ven parecidos', 'Medicamentos caros', 'Medicamentos vencidos', 'Medicamentos extranjeros'], correctIndex: 0 },
                    { id: 421, text: 'Para la presi√≥n alta se usa:', options: ['Losart√°n', 'Metformina', 'Paracetamol', 'Omeprazol'], correctIndex: 0 },
                    { id: 422, text: 'Para la diabetes se usa:', options: ['Enalapril', 'Metformina / Glibenclamida', 'Amoxicilina', 'Ibuprofeno'], correctIndex: 1 },
                    { id: 423, text: 'El Ketorolaco es principalmente:', options: ['Antibi√≥tico', 'Analg√©sico potente', 'Vitamina', 'Para dormir'], correctIndex: 1 },
                    { id: 424, text: '¬øQu√© es la "Fecha de Vencimiento"?', options: ['Fecha de compra', 'L√≠mite en que se garantiza la potencia y seguridad', 'Fecha de fabricaci√≥n', 'Sugerencia de consumo'], correctIndex: 1 },
                    { id: 425, text: 'La automedicaci√≥n responsable implica:', options: ['Tomar lo que sea', 'Usar medicamentos OTC para s√≠ntomas menores por tiempo limitado', 'Usar recetas antiguas', 'Tomar antibi√≥ticos por si acaso'], correctIndex: 1 },
                    { id: 426, text: 'La venta de alcohol en farmacia:', options: ['Est√° prohibida', 'Solo alcohol medicinal desnaturalizado', 'Cualquier alcohol', 'Solo gel'], correctIndex: 1 },
                    { id: 427, text: 'Un "Evento Adverso" es:', options: ['Una fiesta', 'Cualquier da√±o imprevisto por uso de medicamento', 'Un descuento', 'Una venta exitosa'], correctIndex: 1 },
                    { id: 428, text: 'El Qu√≠mico Farmac√©utico debe estar presente:', options: ['Todo el horario de funcionamiento', 'Solo en la ma√±ana', 'Solo para abrir', 'Cuando hay inspecci√≥n'], correctIndex: 0 },
                    { id: 429, text: 'Las muestras m√©dicas:', options: ['Se pueden vender', 'Est√° prohibida su venta', 'Se regalan al cliente', 'Son para el personal'], correctIndex: 1 },
                    { id: 430, text: 'La receta electr√≥nica:', options: ['No es v√°lida', 'Es v√°lida si tiene firma electr√≥nica avanzada', 'Solo impresa', 'Es opcional'], correctIndex: 1 },
                    { id: 431, text: 'El Paracetamol sirve para:', options: ['Infecci√≥n', 'Dolor y fiebre (Analg√©sico/Antipir√©tico)', 'Alergia', 'Diabetes'], correctIndex: 1 },
                    { id: 432, text: 'La Clorfenamina es un:', options: ['Antibi√≥tico', 'Antihistam√≠nico (Antial√©rgico)', 'Diur√©tico', 'Laxante'], correctIndex: 1 },
                    { id: 433, text: '¬øQu√© hacer ante un error de medicaci√≥n?', options: ['Ocultarlo', 'Informar inmediatamente al QF', 'Culpar al paciente', 'No hacer nada'], correctIndex: 1 },
                    { id: 434, text: '¬øQu√© es la DCI?', options: ['Documento Civil', 'Denominaci√≥n Com√∫n Internacional (Nombre gen√©rico)', 'Director Central', 'Departamento Cl√≠nico'], correctIndex: 1 },
                    { id: 435, text: 'Los colirios son para uso:', options: ['Oft√°lmico (Ojos)', '√ìtico (O√≠dos)', 'Oral', 'T√≥pico'], correctIndex: 0 },
                    { id: 436, text: 'La Insulina NPH es de aspecto:', options: ['Transparente', 'Lechoso (Turbio)', 'Rojo', 'Azul'], correctIndex: 1 },
                    { id: 437, text: 'La Insulina Cristalina es de aspecto:', options: ['Transparente', 'Lechoso', 'Verde', 'Amarillo'], correctIndex: 0 },
                    { id: 438, text: '¬øQu√© es un placebo?', options: ['Un medicamento fuerte', 'Sustancia inerte sin efecto farmacol√≥gico', 'Un antibi√≥tico nuevo', 'Una vitamina'], correctIndex: 1 },
                    { id: 439, text: 'En caso de intoxicaci√≥n, se debe llamar al:', options: ['CITUC', 'ISP', 'Registro Civil', 'Bomberos'], correctIndex: 0 },
                    { id: 440, text: 'Para ser Auxiliar de Farmacia se requiere certificado de:', options: ['Ense√±anza B√°sica', 'Ense√±anza Media', 'T√≠tulo Universitario', 'Ninguno'], correctIndex: 1 }
                ] 
            }
        ];

        // --- COMPONENTES UI ---
        const Icon = ({ name, className }) => <i className={`ph-${name} ${className || ''} text-lg`}></i>;
        
        const Button = ({ onClick, children, variant = 'primary', className = '', fullWidth = false, type = 'button' }) => {
            const base = "flex items-center justify-center gap-2 rounded-xl font-bold transition-all active:scale-95 text-sm shadow-sm";
            const variants = {
                primary: "bg-aux-dark text-white hover:bg-slate-800 py-3 px-6",
                green: "bg-aux-green text-white hover:bg-emerald-600 py-3 px-6",
                secondary: "bg-white border-2 border-slate-200 text-slate-600 hover:border-aux-green hover:text-aux-green py-3 px-6",
                danger: "bg-red-50 text-red-500 border border-red-100 py-3 px-6"
            };
            return <button type={type} onClick={onClick} className={`${base} ${variants[variant]} ${fullWidth ? 'w-full' : ''} ${className}`}>{children}</button>;
        };

        const Accordion = ({ title, content }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="border-b border-slate-100 last:border-0">
                    <button onClick={() => setIsOpen(!isOpen)} className="w-full flex justify-between items-center py-4 text-left font-medium text-slate-700 hover:text-aux-green transition-colors">
                        {title}
                        <Icon name="caret-down" className={`transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
                    </button>
                    <div className={`overflow-hidden transition-all duration-300 ${isOpen ? 'max-h-96 pb-4' : 'max-h-0'}`}>
                        <div className="text-sm text-slate-500 leading-relaxed html-content" dangerouslySetInnerHTML={{__html: content}}></div>
                    </div>
                </div>
            );
        };

        const Header = ({ setView, user, setActiveModal }) => (
            <header className="bg-white shadow-sm h-20 px-6 flex items-center sticky top-0 z-50">
                <div onClick={() => setView('LANDING')} className="cursor-pointer flex items-center h-full mr-4">
                    <img src={LOGO_URL} alt="AuxiliarPro" className="h-10 md:h-12 object-contain" />
                </div>
                <div className="flex gap-4 items-center">
                    <button onClick={() => setView('BLOG')} className="bg-aux-green text-white px-4 py-2 rounded-lg text-xs font-medium hover:bg-emerald-600 transition-colors whitespace-nowrap">Blog</button>
                    {user.isAuthenticated ?
                        <button onClick={() => setView('DASHBOARD')} className="bg-aux-dark text-white px-4 py-2 rounded-lg text-xs font-medium hover:bg-slate-800 transition-colors whitespace-nowrap">Panel de Estudio</button> :
                        <button onClick={() => setActiveModal('auth')} className="bg-aux-dark text-white px-4 py-2 rounded-lg text-xs font-medium hover:bg-slate-800 transition-colors whitespace-nowrap">Panel de Estudio</button>
                    }
                </div>
            </header>
        );

        // --- APP ---
        function App() {
            const [view, setView] = useState('LANDING');
            const [user, setUser] = useState({ name: '', isAuthenticated: false, completedLevels: [] });
            const [quizState, setQuizState] = useState({ active: false, levelId: null, qIndex: 0, score: 0, incorrectQuestions: [] });
            const [activeModal, setActiveModal] = useState(null);
            const [authMode, setAuthMode] = useState('login');
            const [legalTab, setLegalTab] = useState('terms');
            const [selectedArticle, setSelectedArticle] = useState(null);
            const [expandIntro, setExpandIntro] = useState(false);

            // Auth Logic
            useEffect(() => {
                const unsubscribe = onAuthStateChanged(auth, (u) => {
                    if (u) {
                        const ref = doc(db, 'artifacts', appId, 'users', u.uid, 'data', 'progress');
                        onSnapshot(ref, (snap) => {
                            if (snap.exists()) setUser({ ...snap.data(), uid: u.uid, isAuthenticated: true });
                            else setUser({ name: u.displayName || 'Colega', currentLevel: 1, completedLevels: [], isAuthenticated: true, uid: u.uid });
                        });
                    } else {
                        const local = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY) || '{}');
                        if (local.isAuthenticated) setUser(local);
                    }
                });
                return () => unsubscribe();
            }, []);

            const saveProgress = (newLevel, newCompleted) => {
                const updated = { ...user, currentLevel: newLevel, completedLevels: newCompleted };
                setUser(updated);
                localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));
                if (user.uid) {
                    try { setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'progress'), updated, { merge: true }); } catch(e) {}
                }
            };

            const resetProgress = () => {
                if (window.confirm("¬øEst√°s seguro de que quieres reiniciar todo tu progreso? Volver√°s al Nivel 1 y se borrar√°n tus avances.")) {
                    saveProgress(1, []);
                }
            };

            const startQuiz = (lvlId) => setQuizState({ active: true, levelId: lvlId, qIndex: 0, score: 0, showResult: false, incorrectQuestions: [] });
            
            const handleAnswer = (idx) => {
                const lvl = LEVELS.find(l => l.id === quizState.levelId);
                const q = lvl.questions[quizState.qIndex];
                const isCorrect = idx === q.correctIndex;
                const nextScore = isCorrect ? quizState.score + 1 : quizState.score;

                // Nueva l√≥gica: Guardar errores
                let nextIncorrect = quizState.incorrectQuestions || [];
                if (!isCorrect) {
                    nextIncorrect = [...nextIncorrect, { q: q.text, a: q.options[q.correctIndex] }];
                }
                
                if (quizState.qIndex + 1 < lvl.qCount) {
                    setQuizState({ ...quizState, qIndex: quizState.qIndex + 1, score: nextScore, incorrectQuestions: nextIncorrect });
                } else {
                    const passed = nextScore >= lvl.passingScore;
                    if (passed) {
                        const nextLvl = lvl.id === user.currentLevel ? user.currentLevel + 1 : user.currentLevel;
                        const compl = user.completedLevels.includes(lvl.id) ? user.completedLevels : [...user.completedLevels, lvl.id];
                        saveProgress(nextLvl, compl);
                        if(window.confetti) window.confetti();
                    }
                    setQuizState({ ...quizState, showResult: true, score: nextScore, incorrectQuestions: nextIncorrect });
                }
            };

            const Footer = () => (
                <footer className="bg-aux-dark text-slate-400 py-10 px-6 text-center text-xs mt-auto">
                    <div className="max-w-md mx-auto">
                        <div className="border border-slate-700 bg-slate-800/50 p-6 rounded-xl mb-8">
                            <h4 className="font-bold text-white uppercase mb-2">Comentarios</h4>
                            <p className="mb-4">¬øErrores o sugerencias?</p>
                            <a href="mailto:auxiliarprofarma@gmail.com" className="bg-white text-aux-dark px-4 py-2 rounded-full font-bold">auxiliarprofarma@gmail.com</a>
                            <p className="mt-4 italic opacity-50">Sitio construido con asistencia de IA. Validar informaci√≥n.</p>
                        </div>
                        <div className="flex justify-center gap-4 uppercase font-bold text-[10px]">
                            <button onClick={() => {setLegalTab('terms'); setActiveModal('legal');}}>T√©rminos</button>
                            <button onClick={() => {setLegalTab('privacy'); setActiveModal('legal');}}>Privacidad</button>
                            <button onClick={() => {setLegalTab('disclaimers'); setActiveModal('legal');}}>Descargos</button>
                        </div>
                        <p className="mt-4 opacity-30">¬© 2026 AuxiliarPro</p>
                    </div>
                </footer>
            );

            // AUTH MODAL
            const AuthModal = () => {
                if (activeModal !== 'auth') return null;
                const [form, setForm] = useState({ name: '', email: '', pass: '' });
                const [error, setError] = useState('');

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    setError('');
                    try {
                        if (authMode === 'register') {
                            const cred = await createUserWithEmailAndPassword(auth, form.email, form.pass);
                            await updateProfile(cred.user, { displayName: form.name });
                            await setDoc(doc(db, 'artifacts', appId, 'users', cred.user.uid, 'data', 'progress'), { name: form.name, currentLevel: 1, completedLevels: [], lastUpdate: new Date() });
                        } else {
                            await signInWithEmailAndPassword(auth, form.email, form.pass);
                        }
                        setActiveModal(null);
                        setView('DASHBOARD');
                    } catch (err) { setError(err.code === 'auth/wrong-password' ? 'Contrase√±a incorrecta' : 'Error en los datos'); }
                };

                return (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in">
                        <div className="bg-white p-8 rounded-3xl w-full max-w-sm relative shadow-2xl">
                            <button onClick={() => setActiveModal(null)} className="absolute top-4 right-4 text-slate-300 hover:text-slate-600"><Icon name="x" className="text-xl"/></button>
                            <div className="text-center mb-6">
                                <div className="bg-emerald-100 w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 text-emerald-600 text-2xl"><Icon name="user" /></div>
                                <h2 className="text-2xl font-bold text-slate-800">{authMode === 'register' ? 'Crear Cuenta' : 'Bienvenido'}</h2>
                            </div>
                            <form onSubmit={handleSubmit} className="space-y-3">
                                {authMode === 'register' && <input type="text" placeholder="Tu Nombre" className="w-full p-3 bg-slate-50 border rounded-xl" required onChange={e => setForm({...form, name: e.target.value})} />}
                                <input type="email" placeholder="Correo Electr√≥nico" className="w-full p-3 bg-slate-50 border rounded-xl" required onChange={e => setForm({...form, email: e.target.value})} />
                                <input type="password" placeholder="Contrase√±a" className="w-full p-3 bg-slate-50 border rounded-xl" required onChange={e => setForm({...form, pass: e.target.value})} />
                                {error && <p className="text-red-500 text-xs text-center font-bold">{error}</p>}
                                <Button fullWidth variant="green" type="submit">{authMode === 'register' ? 'Registrarse Gratis' : 'Entrar'}</Button>
                            </form>
                            <button onClick={() => setAuthMode(authMode === 'login' ? 'register' : 'login')} className="block w-full text-center mt-4 text-sm text-slate-500 hover:text-aux-green underline">
                                {authMode === 'login' ? '¬øNo tienes cuenta? Reg√≠strate aqu√≠' : '¬øYa tienes cuenta? Inicia Sesi√≥n'}
                            </button>
                            <div className="mt-4">
                                <Button fullWidth variant="secondary" onClick={() => { setActiveModal(null); setView('LANDING'); }}>Volver al Inicio</Button>
                            </div>
                        </div>
                    </div>
                );
            };

            // VISTAS
            const renderLanding = () => (
                <div className="flex-1 flex flex-col bg-white w-full h-full overflow-hidden">
                    <Header setView={setView} user={user} setActiveModal={setActiveModal} />
                    <div className="flex-1 overflow-y-auto">
                        <div className="p-6 text-center max-w-md mx-auto mt-8">
                            <div className="inline-block bg-emerald-50 text-aux-green px-3 py-1 rounded-full text-[10px] font-bold mb-6">META: CREDENCIAL 2026</div>
                            
                            <h1 className="font-extrabold text-aux-dark mb-6 leading-tight">
                                <span className="block text-2xl">PREPARA TU EXAMEN DE</span>
                                <span className="block text-4xl text-aux-green">AUXILIAR DE FARMACIA</span>
                            </h1>
                            
                            <div className="flex flex-col gap-3 mb-12">
                                <Button variant="primary" onClick={() => user.isAuthenticated ? setView('DASHBOARD') : setActiveModal('auth')}>COMENZAR AHORA</Button>
                                <Button variant="secondary" onClick={() => setView('BLOG')}>LEER ART√çCULOS</Button>
                                <Button variant="green" onClick={() => setView('DERMOCHECK')}><Icon name="calculator"/> DERMOCHECK</Button>
                            </div>

                            <div className="watermark-container p-8 mx-4 mb-12 rounded-3xl text-left">
                                <span className="watermark-icon -top-8 -right-4 text-[12rem] rotate-12">!</span>
                                <h3 className="font-bold text-xl text-aux-dark mb-3 flex items-center gap-3 relative z-10"><Icon name="student" className="text-aux-green text-2xl"/> Qui√©n soy</h3>
                                <div className="relative z-10 text-slate-600 font-medium leading-relaxed">
                                    <p>¬°Hola! Est√°s en AuxiliaresPro. Te lo cuento de colega a colega: estoy prepar√°ndome con todo para ser Auxiliar de Farmacia. Esta web es el resultado de mi propia investigaci√≥n en los decretos sanitarios, usando la IA para organizar y resumir tanta informaci√≥n compleja.</p>
                                    {expandIntro && (
                                        <p className="mt-3 animate-fade-in">
                                            Han sido semanas de ensayo, error y mucho estudio para crear este sitio. Es mi cuaderno de preparaci√≥n para el examen 2026 y est√° disponible para ti. √ösalo, crit√≠calo si encuentras fallos y ¬°vamos por ese logro juntos!
                                        </p>
                                    )}
                                    <button
                                        onClick={() => setExpandIntro(!expandIntro)}
                                        className="text-aux-green font-bold text-sm mt-2 hover:underline focus:outline-none"
                                    >
                                        {expandIntro ? "Leer menos" : "Leer m√°s"}
                                    </button>
                                </div>
                            </div>

                            <div className="border-t border-slate-100 pt-8 mt-4 pb-8">
                                <h3 className="font-bold text-slate-800 mb-4">¬øDudas sobre el proceso?</h3>
                                <Button variant="secondary" onClick={() => setView('FAQS')}><Icon name="question"/> Ver Preguntas Frecuentes</Button>
                            </div>
                        </div>
                        <Footer />
                    </div>
                </div>
            );

            const renderDashboard = () => (
                <div className="flex-1 flex flex-col bg-slate-50 w-full h-full overflow-hidden">
                    <Header setView={setView} user={user} setActiveModal={setActiveModal} />
                    <div className="flex-1 overflow-y-auto p-4 pb-20">
                        <div className="max-w-md mx-auto space-y-4">
                            <div className="bg-aux-dark text-white p-6 rounded-2xl shadow-lg relative overflow-hidden">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="text-xs font-bold text-slate-400 uppercase">Tu Progreso</span>
                                    <span className="text-2xl font-bold text-aux-green">{Math.round((user.completedLevels.length / LEVELS.length) * 100)}%</span>
                                </div>
                                <div className="w-full bg-slate-700 h-2 rounded-full"><div className="bg-aux-green h-full rounded-full" style={{width: `${(user.completedLevels.length / LEVELS.length) * 100}%`}}></div></div>
                            </div>
                            <div className="space-y-3">
                                {LEVELS.map(l => {
                                    const isLocked = l.id > user.currentLevel;
                                    const isCompleted = user.completedLevels.includes(l.id);
                                    
                                    return (
                                        <div key={l.id} onClick={() => !isLocked && startQuiz(l.id)} className={`bg-white p-4 rounded-xl border-2 flex items-center gap-4 ${isLocked ? 'opacity-60' : 'hover:border-aux-green cursor-pointer'}`}>
                                            <div className={`w-12 h-12 rounded-full flex items-center justify-center text-white ${isLocked ? 'bg-slate-300' : l.iconBg}`}><Icon name={isLocked ? "lock" : "play"}/></div>
                                            <div className="flex-1">
                                                <div className="flex justify-between items-center mb-1">
                                                    <h4 className="font-bold text-aux-dark">{l.title}</h4>
                                                    {!isLocked && (
                                                        isCompleted 
                                                        ? <span className="text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full font-bold">APROBADO</span>
                                                        : <span className="text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold">PENDIENTE</span>
                                                    )}
                                                </div>
                                                <p className="text-xs text-slate-500">{l.desc}</p>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                            <div className="grid grid-cols-2 gap-3 mt-4">
                                <Button variant="secondary" onClick={() => setView('LIBRARY')}><Icon name="book"/> Biblioteca</Button>
                                <Button variant="secondary" onClick={() => setActiveModal('community')}><Icon name="users"/> Foro</Button>
                            </div>
                            <div className="pt-6 space-y-3">
                                <Button variant="secondary" fullWidth onClick={() => setView('LANDING')}>Volver al Inicio</Button>
                                <Button variant="danger" fullWidth onClick={() => {signOut(auth); localStorage.removeItem(LOCAL_STORAGE_KEY); setView('LANDING');}}>Cerrar Sesi√≥n</Button>
                                
                                <div className="mt-4 pt-4 border-t border-slate-200 text-center">
                                    <p className="text-[10px] text-slate-400 mb-2">¬øQuieres repasar todo desde cero?</p>
                                    <button onClick={resetProgress} className="text-xs font-bold text-slate-400 hover:text-red-500 transition-colors border-b border-dashed border-slate-300 hover:border-red-300 pb-0.5">Reiniciar Niveles</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderDermoCheck = () => (
                <div className="flex-1 flex flex-col bg-aux-dark w-full h-screen absolute inset-0 z-50">
                    <div className="bg-aux-dark text-white p-3 flex justify-between items-center shadow-md z-10">
                        <span className="font-bold flex items-center gap-2"><Icon name="calculator" className="text-aux-green"/> DermoCheck</span>
                        <button onClick={() => setView('LANDING')} className="text-xs bg-white/10 px-3 py-1 rounded-full hover:bg-white/20 transition-colors">Salir</button>
                    </div>
                    <div className="flex-1 bg-black relative"><iframe src={DERMO_URL} className="w-full h-full border-0"></iframe></div>
                </div>
            );

            // Modales Legales, Blog, Faqs, etc.
            const LegalModal = () => {
                if (activeModal !== 'legal') return null;
                const texts = {
                    terms: `AuxiliarPro es una aplicaci√≥n de apoyo educativo pensada para acompa√±arte en la preparaci√≥n del examen de Auxiliar de Farmacia. Al usarla, aceptas estos t√©rminos de forma simple y transparente.

Todo el contenido tiene fines informativos y de apoyo al estudio, y no reemplaza la informaci√≥n oficial ni la orientaci√≥n de profesionales del √°rea de la salud. Te recomendamos siempre contrastar la informaci√≥n con fuentes confiables.

AuxiliarPro puede actualizar, modificar o pausar funciones cuando sea necesario, siempre buscando mejorar la experiencia de uso.

Algunas funciones pueden requerir registro. En ese caso, t√∫ eres responsable de cuidar tus datos de acceso.

No est√° permitido usar la aplicaci√≥n para fines indebidos, como compartir contenido con derechos de autor, enviar spam o distribuir archivos da√±inos.

Hacemos nuestro mejor esfuerzo por mantener la app disponible y segura, pero no podemos garantizar un funcionamiento perfecto en todo momento, ya que pueden ocurrir interrupciones t√©cnicas.`,
                    privacy: `En AuxiliarPro valoramos y respetamos tu privacidad. Nuestro compromiso es cuidar tus datos y ser transparentes con el uso que les damos.

Recopilamos solo la informaci√≥n que t√∫ nos entregas, como tu nombre, correo electr√≥nico y avance en los cuestionarios. Esto nos permite personalizar tu experiencia y mejorar la app para ti.

Tambi√©n podemos recoger algunos datos t√©cnicos de forma autom√°tica, como el tipo de dispositivo o direcci√≥n IP, √∫nicamente con fines de an√°lisis, funcionamiento y seguridad.

Tu informaci√≥n no se comparte con terceros, salvo cuando sea estrictamente necesario para el funcionamiento del servicio (por ejemplo, el alojamiento de la app) o por requerimientos legales.

Utilizamos cookies y tecnolog√≠as similares para que la aplicaci√≥n funcione mejor. Puedes desactivarlas desde tu navegador, aunque esto podr√≠a afectar algunas funciones.

Tomamos medidas para proteger tus datos, aunque es importante considerar que ninguna transmisi√≥n por Internet es 100% segura.

Esta pol√≠tica puede actualizarse con el tiempo, por lo que te recomendamos revisarla de vez en cuando.`,
                    disclaimers: `1. Independencia: AuxiliarPro es una iniciativa independiente y NO tiene afiliaci√≥n, respaldo ni patrocinio alguno por parte del Ministerio de Salud (MINSAL), el Instituto de Salud P√∫blica (ISP), las SEREMIS de Salud o cualquier otra entidad gubernamental o autoridad sanitaria de Chile. La informaci√≥n y los materiales proporcionados en esta plataforma se basan en fuentes p√∫blicas y en el conocimiento general sobre el examen de Auxiliar de Farmacia, pero no constituyen informaci√≥n oficial.

2. Exactitud de la Informaci√≥n: Aunque nos esforzamos por mantener la informaci√≥n actualizada y precisa, AuxiliarPro no garantiza la exactitud, integridad o vigencia del contenido. La legislaci√≥n y las normativas sanitarias pueden cambiar, y es responsabilidad del usuario verificar la informaci√≥n con las fuentes oficiales correspondientes antes de tomar decisiones basadas en ella.

3. Prop√≥sito Educativo: El contenido de AuxiliarPro tiene fines exclusivamente educativos e informativos. No debe considerarse como asesoramiento profesional, m√©dico, legal o de cualquier otra √≠ndole. El uso de la plataforma y la confianza en su contenido son bajo el propio riesgo del usuario.

4. Resultados del Examen: El uso de AuxiliarPro no garantiza la aprobaci√≥n del examen de Auxiliar de Farmacia ni la obtenci√≥n de la credencial sanitaria. El √©xito en el examen depende del estudio individual, la preparaci√≥n y otros factores ajenos a la plataforma.

5. Enlaces Externos: AuxiliarPro puede contener enlaces a sitios web de terceros. No nos hacemos responsables por el contenido, las pol√≠ticas de privacidad o las pr√°cticas de estos sitios externos.

6. Limitaci√≥n de Responsabilidad: En ning√∫n caso AuxiliarPro ser√° responsable por da√±os directos, indirectos, incidentales, especiales o consecuentes que surjan del uso o la imposibilidad de uso de la plataforma, incluso si se ha advertido sobre la posibilidad de tales da√±os.`
                };
                return (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-xl">
                            <h3 className="font-bold text-lg mb-4 capitalize text-aux-dark">{legalTab === 'disclaimers' ? 'Descargos' : legalTab === 'terms' ? 'T√©rminos' : 'Privacidad'}</h3>
                            <div className="text-sm text-slate-600 mb-6 leading-relaxed whitespace-pre-line overflow-y-auto max-h-[60vh] pr-2">
                                {texts[legalTab]}
                            </div>
                            <Button fullWidth variant="green" onClick={() => setActiveModal(null)}>Entendido</Button>
                        </div>
                    </div>
                );
            };

            const CommunityModal = () => {
                if (activeModal !== 'community') return null;
                return (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl p-6 max-w-sm text-center shadow-xl">
                            <Icon name="users" className="text-4xl text-blue-500 mb-4"/>
                            <h3 className="font-bold mb-2 text-aux-dark">Comunidad</h3>
                            <p className="text-sm mb-6 text-slate-600">√önete a nuestros grupos de estudio.</p>
                            <div className="space-y-3">
                                <a href="https://chat.whatsapp.com/J4VkI8mzTTs9UrzvGqBbdz" target="_blank" className="block w-full bg-[#25D366] text-white py-3 rounded-xl font-bold hover:opacity-90 transition-opacity flex items-center justify-center gap-2"><Icon name="whatsapp-logo" size={20} />WhatsApp</a>
                                <a href="https://www.facebook.com/profile.php?id=61584679565188" target="_blank" className="block w-full bg-[#1877F2] text-white py-3 rounded-xl font-bold hover:opacity-90 transition-opacity flex items-center justify-center gap-2"><Icon name="facebook-logo" size={20} />Facebook</a>
                            </div>
                            <p className="mt-4 text-xs text-red-600 font-bold leading-snug">*Se requiere buen comportamiento y buena convivencia. El incumplimiento resultar√° en la eliminaci√≥n del grupo.</p>
                            <button onClick={()=>setActiveModal(null)} className="mt-6 text-slate-400 text-sm hover:text-slate-600 transition-colors">Cerrar</button>
                        </div>
                    </div>
                );
            };

            // RENDERIZADO DEL QUIZ ACTUALIZADO
            const renderQuiz = () => {
                const currentLevel = LEVELS.find(l => l.id === quizState.levelId);
                const isPassed = quizState.score >= currentLevel.passingScore;

                return (
                    <div className="absolute inset-0 bg-white z-50 flex flex-col animate-fade-in h-full">
                        <div className="bg-aux-dark text-white p-4 flex justify-between items-center shadow-md">
                            <span className="font-medium">
                                {quizState.showResult ? 'Resultados' : `Pregunta ${quizState.qIndex + 1} / ${currentLevel.qCount}`}
                            </span>
                            <button onClick={()=>setQuizState({active:false, score:0, qIndex:0, showResult:false})} className="flex items-center gap-1 text-xs font-bold bg-white/10 px-3 py-1.5 rounded-lg hover:bg-white/20 transition-colors">
                                <Icon name="arrow-u-up-left" size={16}/> Salir
                            </button>
                        </div>
                        <div className="flex-1 p-4 md:p-6 overflow-y-auto bg-slate-50">
                            {!quizState.showResult ? (
                                <div className="max-w-md mx-auto w-full min-h-full flex flex-col justify-center">
                                    <div className="mb-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                                        <span className="text-xs font-bold text-aux-green bg-emerald-50 px-2 py-1 rounded-full uppercase mb-3 inline-block">Pregunta</span>
                                        <h3 className="text-xl font-bold text-aux-dark leading-snug">{currentLevel.questions[quizState.qIndex].text}</h3>
                                    </div>
                                    <div className="space-y-3 pb-8">
                                        {currentLevel.questions[quizState.qIndex].options.map((opt,i) => (
                                            <button key={i} onClick={()=>handleAnswer(i)} className="w-full p-4 border-2 border-slate-100 rounded-xl text-left hover:bg-emerald-50 hover:border-aux-green transition-all bg-white font-medium text-slate-700 flex items-center group"><span className="w-8 h-8 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center mr-3 font-bold text-sm group-hover:bg-aux-green group-hover:text-white transition-colors">{String.fromCharCode(65+i)}</span>{opt}</button>
                                        ))}
                                    </div>
                                </div>
                            ) : (
                                <div className="max-w-md mx-auto w-full bg-white p-6 md:p-8 rounded-2xl shadow-lg my-auto">
                                    <div className="text-center">
                                        <div className="text-6xl mb-4">{isPassed ? 'üéâ' : 'üìö'}</div>
                                        <h2 className="text-2xl font-bold mb-2 text-aux-dark">{isPassed ? '¬°Nivel Aprobado!' : '¬°A Repasar!'}</h2>
                                    </div>
                                    
                                    <div className="my-6 bg-slate-50 p-4 rounded-xl border border-slate-100">
                                        <div className="flex justify-between items-center text-sm mb-2">
                                            <span>Correctas:</span>
                                            <span className="font-bold text-aux-green">{quizState.score}</span>
                                        </div>
                                        <div className="flex justify-between items-center text-sm mb-2">
                                            <span>Incorrectas:</span>
                                            <span className="font-bold text-red-500">{currentLevel.qCount - quizState.score}</span>
                                        </div>
                                        <div className="w-full bg-slate-200 h-2 rounded-full mt-2"><div className={`h-full rounded-full ${isPassed ? 'bg-aux-green' : 'bg-red-400'}`} style={{width: `${(quizState.score / currentLevel.qCount) * 100}%`}}></div></div>
                                    </div>

                                    {/* M√≥dulo de Errores - Nueva Inserci√≥n Quir√∫rgica */}
                                    {quizState.incorrectQuestions && quizState.incorrectQuestions.length > 0 && (
                                        <div className="mb-6 text-left bg-red-50 p-4 rounded-xl border border-red-100">
                                            <h4 className="font-bold text-red-800 text-sm mb-2 flex items-center gap-2"><Icon name="warning-circle"/> Tus Errores ({quizState.incorrectQuestions.length}):</h4>
                                            <ul className="space-y-3 text-xs text-red-700 max-h-40 overflow-y-auto pr-2 custom-scrollbar">
                                                {quizState.incorrectQuestions.map((err, idx) => (
                                                    <li key={idx} className="border-b border-red-100 last:border-0 pb-2">
                                                        <span className="font-semibold block text-slate-700 mb-1">{idx + 1}. {err.q}</span>
                                                        <span className="block bg-white/50 p-1 rounded px-2 text-green-700 font-bold">‚úì {err.a}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}

                                    {!isPassed && (
                                        <div className="mb-8 text-left bg-orange-50 p-4 rounded-xl border-l-4 border-orange-400 shadow-sm">
                                            <p className="font-bold text-orange-800 text-sm mb-1">Consejo:</p>
                                            <p className="text-sm text-orange-800 font-medium leading-relaxed">{currentLevel.failureFeedback}</p>
                                        </div>
                                    )}

                                    <div className="space-y-4">
                                        <Button variant="primary" fullWidth onClick={()=>{ setQuizState({active:false, score:0, qIndex:0, showResult:false}); setView('LIBRARY'); }}>
                                            <Icon name="book-open-text" className="text-xl"/> Ir a estudiar a la Biblioteca
                                        </Button>
                                        
                                        {isPassed ? (
                                             <Button variant="green" fullWidth onClick={()=>setQuizState({active:false, score:0, qIndex:0, showResult:false})}>Continuar al Panel</Button>
                                        ) : (
                                            <button onClick={()=>setQuizState({active:false, score:0, qIndex:0, showResult:false})} className="block w-full text-center text-slate-400 text-sm hover:text-slate-600 underline py-2">Volver al men√∫</button>
                                        )}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            return (
                <div className="w-full max-w-md bg-white h-screen md:h-[90vh] md:rounded-3xl md:shadow-2xl overflow-hidden flex flex-col relative mx-auto">
                    {view === 'LANDING' && renderLanding()}
                    {view === 'DASHBOARD' && renderDashboard()}
                    {view === 'DERMOCHECK' && renderDermoCheck()}
                    {view === 'LIBRARY' && <div className="flex-1 flex flex-col h-full overflow-hidden"><Header setView={setView} user={user} setActiveModal={setActiveModal}/><div className="flex-1 p-6 overflow-y-auto min-h-0"><h2 className="font-bold text-xl mb-4 text-aux-dark">Biblioteca</h2>{PDF_DOCS.map((d,i)=><div key={i} className="p-4 border border-slate-100 rounded-xl mb-3 bg-slate-50 hover:bg-white hover:shadow-sm transition-all flex items-center gap-3"><div className="bg-red-100 p-2 rounded-lg text-red-500"><Icon name="file-pdf" size={24}/></div><a href={d.file} target="_blank" className="text-slate-700 font-bold hover:text-aux-green transition-colors flex-1">{d.title}</a></div>)}<button onClick={()=>setView('DASHBOARD')} className="mt-4 text-slate-400 hover:text-slate-600 transition-colors">Volver</button></div></div>}
                    {view === 'FAQS' && <div className="flex-1 flex flex-col h-full overflow-hidden"><Header setView={setView} user={user} setActiveModal={setActiveModal}/><div className="flex-1 p-6 overflow-y-auto min-h-0"><h2 className="font-bold text-xl mb-4 text-aux-dark">Preguntas Frecuentes</h2>{FAQS.map((f,i)=><Accordion key={i} title={f.q} content={f.a}/>)}<button onClick={()=>setView('LANDING')} className="mt-4 text-slate-400 hover:text-slate-600 transition-colors">Volver</button></div></div>}
                    {view === 'BLOG' && <div className="flex-1 flex flex-col h-full overflow-hidden"><Header setView={setView} user={user} setActiveModal={setActiveModal}/><div className="flex-1 p-6 overflow-y-auto min-h-0"><h2 className="font-bold text-xl mb-4 text-aux-dark">Blog</h2><div className="space-y-4">{BLOG_POSTS.map(p=><div key={p.id} onClick={()=>setSelectedArticle(p) || setView('ARTICLE')} className="border border-slate-100 p-5 rounded-xl bg-white shadow-sm hover:shadow-md transition-all cursor-pointer"><div className="flex justify-between items-center mb-2"><span className="text-xs font-bold text-aux-green bg-emerald-50 px-2 py-1 rounded-full uppercase">{p.category}</span><span className="text-xs text-slate-400">{p.date}</span></div><h3 className="font-bold text-lg text-aux-dark mb-2">{p.title}</h3><p className="text-sm text-slate-500 leading-relaxed line-clamp-3">{p.excerpt}</p></div>)}</div><button onClick={()=>setView('LANDING')} className="mt-6 text-slate-400 hover:text-slate-600 transition-colors">Volver</button></div></div>}
                    {view === 'ARTICLE' && <div className="flex-1 flex flex-col bg-white z-50 animate-fade-in h-full overflow-hidden"><Header setView={setView} user={user} setActiveModal={setActiveModal}/><div className="flex-1 p-6 overflow-y-auto min-h-0"><button onClick={()=>setView('BLOG')} className="mb-4 text-slate-400 flex items-center gap-1 hover:text-aux-green"><Icon name="arrow-left"/> Volver</button><div className="max-w-2xl mx-auto blog-content"><span className="text-xs font-bold text-aux-green bg-emerald-50 px-2 py-1 rounded-full uppercase mb-4 inline-block">{selectedArticle?.category}</span><div dangerouslySetInnerHTML={{__html: selectedArticle?.content}}></div></div></div></div>}
                    
                    {quizState.active && renderQuiz()}

                    <AuthModal />
                    <LegalModal />
                    <CommunityModal />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
