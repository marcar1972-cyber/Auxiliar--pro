<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Plataforma de estudio colaborativa para el examen de Auxiliar de Farmacia en Chile. Preparaci√≥n para la credencial sanitaria 2026.">
    <title>Auxiliar Pro | Camino a la Credencial 2026</title>

    <!-- GOOGLE ADSENSE -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5783669972264868" crossorigin="anonymous"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'farmacia-green': '#00C853',
              'farmacia-dark': '#0d1b2a',
              'metal-bronze': '#CD7F32',
              'metal-silver': '#C0C0C0',
              'metal-gold': '#FFD700',
              'metal-platinum': '#E5E4E2',
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              heading: ['Roboto', 'sans-serif']
            },
            animation: {
                'fade-in': 'fadeIn 0.3s ease-out forwards',
                'slide-up': 'slideUp 0.3s ease-out forwards',
                'shine': 'shine 2.5s infinite linear',
            },
            keyframes: {
                fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                slideUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                shine: {
                    '0%': { transform: 'translateX(-150%) skewX(-15deg)' },
                    '40%': { transform: 'translateX(150%) skewX(-15deg)' },
                    '100%': { transform: 'translateX(150%) skewX(-15deg)' }
                }
            }
          }
        }
      }
    </script>
    
    <!-- Fuentes y Efectos -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- React y Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Iconos -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
      body { -webkit-tap-highlight-color: transparent; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      
      .shiny-effect { position: relative; overflow: hidden; }
      .shiny-effect::after {
          content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
          background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
          transform: translateX(-150%) skewX(-15deg);
          animation: shine 3s infinite linear;
      }
      
      /* Estilos para contenido HTML dentro de componentes */
      .html-content a { color: #00C853; text-decoration: none; font-weight: 600; }
      .html-content a:hover { text-decoration: underline; }
      .html-content ul { list-style-type: disc; padding-left: 1.2rem; margin-top: 0.5rem; margin-bottom: 0.5rem; }
      .html-content li { margin-bottom: 0.25rem; }
      .html-content strong { color: #0f172a; font-weight: 700; }
      
      .blog-content h1 { font-size: 1.5rem; font-weight: 800; color: #0d1b2a; margin-bottom: 1rem; line-height: 1.2; }
      .blog-content h2 { font-size: 1.25rem; font-weight: 700; color: #059669; margin-top: 1.5rem; margin-bottom: 0.75rem; }
      .blog-content h3 { font-size: 1.1rem; font-weight: 600; color: #334155; margin-top: 1.25rem; margin-bottom: 0.5rem; }
      .blog-content p { margin-bottom: 1rem; line-height: 1.6; color: #475569; }
      .blog-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; color: #475569; }
      .blog-content li { margin-bottom: 0.5rem; }
      .blog-content strong { color: #0f172a; font-weight: 700; }
      .blog-content .cta-box { background-color: #ecfdf5; border: 1px solid #a7f3d0; padding: 1.5rem; border-radius: 0.75rem; margin-top: 2rem; text-align: center; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased min-h-screen flex flex-col items-center justify-center font-sans">

    <div id="root" class="w-full h-full flex justify-center items-center"></div>

    <script type="text/babel" data-type="module" data-presets="react">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDNhuSBBhmmQSV0BHC8MOtLKgAUpvtfWfE",
            authDomain: "auxiliar-pro.firebaseapp.com",
            projectId: "auxiliar-pro",
            storageBucket: "auxiliar-pro.firebasestorage.app",
            messagingSenderId: "342196612566",
            appId: "1:342196612566:web:c7f34365c4e10502e60877"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'auxiliar-pro';

        const { useState, useEffect } = React;

        const APP_VERSION = "6.2.1 Logo & Pay";
        const LOCAL_STORAGE_KEY = 'auxiliar_pro_data';

        const BLOG_POSTS = [
            { id: 'art1', date: '04 DIC', category: 'Legal', title: 'Decreto 466: La "Biblia" que define tu rol en la Farmacia', excerpt: 'Entender el Reglamento de Farmacias es la diferencia entre aprobar y reprobar. Aqu√≠ te explico los art√≠culos claves.', content: '<h1>Decreto 466: La "Biblia" que define tu rol en la Farmacia</h1><p>Colega, si hay un documento que debes tener bajo la almohada, es el <strong>Decreto Supremo 466</strong>. No es solo papeleo; es el reglamento que define qu√© puedes hacer, qu√© no, y qui√©n manda en la farmacia.</p><h2>1. ¬øQui√©n es el Jefe? (Art. 12 y 14)</h2><p>La normativa es tajante: <strong>La Direcci√≥n T√©cnica corresponde exclusivamente al Qu√≠mico Farmac√©utico (QF)</strong>. </p><ul><li>El QF debe estar <strong>siempre presente</strong> durante el horario de funcionamiento.</li><li>Si el QF no est√°, la farmacia <strong>no puede funcionar</strong>.</li><li>T√∫, como auxiliar, eres su brazo derecho, pero legalmente act√∫as bajo su supervisi√≥n directa.</li></ul><h2>2. Condiciones Ambientales (Art. 28)</h2><p>No es solo por comodidad. Los medicamentos se degradan.</p><ul><li><strong>Temperatura ambiente:</strong> M√°ximo 25¬∞C.</li><li><strong>Cadena de Fr√≠o:</strong> Estrictamente entre <strong>2¬∞C y 8¬∞C</strong>.</li></ul><div class="cta-box"><h3 class="text-farmacia-green">¬øTe sientes seguro con la legislaci√≥n?</h3><p>Pon a prueba lo que acabas de leer en el <strong>Nivel 2: Intermedio</strong> del simulador.</p></div>' },
            { id: 'art2', date: '02 DIC', category: 'T√©cnico', title: 'Ley de F√°rmacos (Ley 20.724): Cambios que impactan tu trabajo', excerpt: 'Bioequivalencia, venta directa y fraccionamiento. Descubre c√≥mo esta ley cambi√≥ la forma en que dispensamos.', content: '<h1>Ley de F√°rmacos (Ley 20.724)</h1><p>Seguramente has escuchado hablar de la "Ley de F√°rmacos". Para nosotros, los auxiliares, esta ley cambi√≥ las reglas del juego.</p><h2>1. La Bioequivalencia es Ley</h2><p>Antes era opcional, hoy es obligaci√≥n. La ley exige que la farmacia tenga disponibles los <strong>medicamentos bioequivalentes</strong> (los de la franja amarilla).</p><p><strong>Tu deber:</strong> Debes informar al paciente que existe una alternativa bioequivalente si la receta lo permite.</p><h2>2. Medicamentos de Venta Directa (OTC) en G√≥ndolas</h2><p>La ley permiti√≥ que ciertos medicamentos que no requieren receta puedan estar al alcance del p√∫blico en estanter√≠as.</p><p><strong>Ojo:</strong> Aunque est√©n en g√≥ndola, la venta final siempre pasa por caja y debe haber asesor√≠a disponible.</p><div class="cta-box"><h3 class="text-farmacia-green">¬°A practicar!</h3><p>Revisa las preguntas sobre Bioequivalencia en la <strong>Prueba de Conocimientos B√°sicos</strong>.</p></div>' }
        ];

        const sourceLink = `<br/><a href='https://seremienlinea.minsal.cl' target='_blank' class='text-xs text-farmacia-green font-bold hover:underline mt-2 inline-block'>üîó Revisar fuente oficial</a>`;
        
        const FAQS = [
            { q: "¬øCu√°les son los requisitos para ser Auxiliar?", a: "Licencia de ense√±anza b√°sica completa y 1 a√±o de experiencia laboral en farmacia bajo supervisi√≥n de QF." },
            { q: "¬øC√≥mo y d√≥nde se solicita el examen?", a: "El tr√°mite se realiza ante la SEREMI de Salud. Puedes iniciarlo en <a href='https://seremienlinea.minsal.cl' target='_blank' class='text-farmacia-green font-bold hover:underline'>seremienlinea.minsal.cl</a> adjuntando contrato y certificado de cotizaciones." },
            { q: "¬øCu√°ndo se rinde la prueba?", a: "No hay fechas fijas. La SEREMI te notifica tras validar tus documentos." },
            { q: "¬øQu√© validez tiene?", a: "Indefinida y nacional." }
        ];

        const LEVELS = [
            {
                id: 1, title: 'Prueba de Conocimientos B√°sicos', desc: 'Fundamentos esenciales.', medal: 'Bronce', iconBg: 'bg-gradient-to-br from-[#cd7f32] to-[#8B4513]', borderColor: 'border-[#cd7f32]/50', textColor: 'text-[#8B4513]', qCount: 10, passingScore: 6, examLabel: 'DIAGN√ìSTICO INICIAL', 
                topics: ['Conceptos B√°sicos', 'Rol del Auxiliar'],
                questions: [ 
                    { id: 101, topic: 'Rol del Auxiliar', text: '¬øQui√©n es el responsable t√©cnico legal de la farmacia?', options: ['Due√±o', 'Auxiliar', 'Qu√≠mico Farmac√©utico', 'Gerente'], correctIndex: 2, explanation: 'El QF es el √∫nico responsable legal ante la autoridad sanitaria.' },
                    { id: 102, topic: 'Almacenamiento', text: 'Rango de temperatura para cadena de fr√≠o:', options: ['0-5¬∞C', '2-8¬∞C', '8-15¬∞C', 'Ambiente'], correctIndex: 1, explanation: 'El rango estricto es entre 2¬∞C y 8¬∞C.' },
                    { id: 103, topic: 'V√≠as de Administraci√≥n', text: 'V√≠a de administraci√≥n sublingual:', options: ['Debajo de la lengua', 'Sobre la lengua', 'Tragada', 'Masticada'], correctIndex: 0, explanation: 'Permite absorci√≥n r√°pida evitando el primer paso hep√°tico.' },
                    { id: 104, topic: 'Terminolog√≠a', text: '¬øQu√© significa OTC?', options: ['Receta Retenida', 'Venta Directa', 'Uso Hospitalario', 'Controlado'], correctIndex: 1, explanation: 'Over The Counter: Medicamentos que no requieren receta m√©dica.' },
                    { id: 105, topic: 'Rol del Auxiliar', text: 'Funci√≥n principal del Auxiliar:', options: ['Diagnosticar', 'Recetar', 'Dispensar e informar', 'Administrar local'], correctIndex: 2, explanation: 'Colaborar con el QF en la dispensaci√≥n informada.' },
                    { id: 106, topic: 'Bioequivalencia', text: 'Identificaci√≥n visual de Bioequivalentes:', options: ['Franja Amarilla', 'Estrella Verde', 'Caja Roja', 'Ninguna'], correctIndex: 0, explanation: 'La franja amarilla es el distintivo legal en Chile.' },
                    { id: 107, topic: 'Conceptos B√°sicos', text: '¬øQu√© es un Placebo?', options: ['Sustancia inerte', 'Principio activo potente', 'Marca comercial', 'Gen√©rico'], correctIndex: 0, explanation: 'Sustancia sin acci√≥n farmacol√≥gica usada por efecto psicol√≥gico.' },
                    { id: 108, topic: 'V√≠as de Administraci√≥n', text: 'Ejemplo de v√≠a Parenteral:', options: ['Jarabes', 'Inyectables', 'Cremas', 'Supositorios'], correctIndex: 1, explanation: 'V√≠as que atraviesan la piel (IV, IM, SC).' },
                    { id: 109, topic: 'Almacenamiento', text: 'La fecha de vencimiento indica:', options: ['Fecha de fabricaci√≥n', 'L√≠mite de eficacia/seguridad', 'Fecha de venta', 'Fecha de apertura'], correctIndex: 1, explanation: 'Hasta esa fecha el laboratorio garantiza la estabilidad.' },
                    { id: 110, topic: 'Legislaci√≥n', text: '¬øQu√© receta usan los estupefacientes?', options: ['Simple', 'Retenida', 'Cheque', 'Magistral'], correctIndex: 2, explanation: 'Receta Cheque es obligatoria para estupefacientes y psicotr√≥picos lista II.' }
                ]
            },
            {
                id: 2, title: 'Nivel 2: Intermedio', desc: 'Legislaci√≥n y almacenamiento.', medal: 'Plata', iconBg: 'bg-gradient-to-br from-[#E0E0E0] to-[#9E9E9E]', borderColor: 'border-[#9E9E9E]/50', textColor: 'text-[#757575]', qCount: 15, passingScore: 9, examLabel: 'SIMULACRO NIVEL 2',
                topics: ['Legislaci√≥n', 'Reglamentos'],
                questions: [
                    { id: 201, topic: 'Decretos', text: '¬øDecreto que aprueba el Reglamento de Farmacias?', options: ['DS 594', 'DS 466', 'DS 404', 'DS 405'], correctIndex: 1, explanation: 'DS 466 es el reglamento base.' },
                    { id: 202, topic: 'Recetas', text: 'Validez de una Receta Cheque:', options: ['60 d√≠as', '30 d√≠as', '10 d√≠as', 'Indefinida'], correctIndex: 1, explanation: '30 d√≠as corridos desde su emisi√≥n.' },
                    { id: 203, topic: 'Controlados', text: '¬øQu√© indica la estrella verde en el envase?', options: ['Bioequivalente', 'Psicotr√≥pico Lista III', 'Estupefaciente', 'Psicotr√≥pico Lista IV'], correctIndex: 2, explanation: 'Estupefacientes (o psicotr√≥picos L-I) sujetos a control legal.' },
                    { id: 204, topic: 'Libros Oficiales', text: '¬øD√≥nde se registran los reclamos?', options: ['Cuaderno', 'Sistema PC', 'Libro de Reclamos foliado', 'Buz√≥n'], correctIndex: 2, explanation: 'Libro foliado y timbrado por la Seremi.' },
                    { id: 205, topic: 'Almacenamiento', text: 'Temperatura m√°xima ambiental en farmacia:', options: ['20¬∞C', '25¬∞C', '30¬∞C', '15¬∞C'], correctIndex: 1, explanation: 'Generalmente 25¬∞C para asegurar estabilidad.' },
                    { id: 206, topic: 'Decretos', text: 'El Decreto 404 regula:', options: ['Farmacias', 'Estupefacientes', 'Psicotr√≥picos', 'Cosm√©ticos'], correctIndex: 1, explanation: 'Reglamento de Estupefacientes.' },
                    { id: 207, topic: 'Decretos', text: 'El Decreto 405 regula:', options: ['Farmacias', 'Estupefacientes', 'Psicotr√≥picos', 'Alimentos'], correctIndex: 2, explanation: 'Reglamento de Psicotr√≥picos.' },
                    { id: 208, topic: 'Autoridad Sanitaria', text: '¬øQui√©n autoriza la instalaci√≥n de una farmacia?', options: ['Municipalidad', 'ISP', 'SEREMI de Salud', 'SII'], correctIndex: 2, explanation: 'La Autoridad Sanitaria Regional (SEREMI).' },
                    { id: 209, topic: 'Dispensaci√≥n', text: '¬øPuede un auxiliar sustituir un medicamento?', options: ['S√≠, siempre', 'Solo por Bioequivalentes', 'Nunca', 'Si es m√°s barato'], correctIndex: 1, explanation: 'Solo si es Bioequivalente certificado.' },
                    { id: 210, topic: 'Almacenamiento', text: 'Medicamentos termol√°biles requieren:', options: ['Luz directa', 'Cadena de Fr√≠o', 'Congelaci√≥n', 'Calor'], correctIndex: 1, explanation: 'Termol√°bil = sensible a la temperatura.' },
                    { id: 211, topic: 'Recetas', text: 'La Receta Retenida se archiva por:', options: ['No se archiva', '1 a√±o', '6 meses', '2 a√±os'], correctIndex: 0, explanation: 'Se debe foliar y archivar cronol√≥gicamente.' }, 
                    { id: 212, topic: 'Dispensaci√≥n', text: 'Venta de Corticoides Sist√©micos requiere:', options: ['Venta Directa', 'Receta Simple', 'Receta Retenida', 'Receta Cheque'], correctIndex: 1, explanation: 'Generalmente receta simple, salvo excepciones.' },
                    { id: 213, topic: 'Libros Oficiales', text: 'Libro de control de Psicotr√≥picos debe ser llenado por:', options: ['Auxiliar', 'Cajero', 'Qu√≠mico Farmac√©utico', 'Bodeguero'], correctIndex: 2, explanation: 'Responsabilidad exclusiva del QF.' },
                    { id: 214, topic: 'Almacenamiento', text: '¬øQu√© es FEFO?', options: ['Primero en entrar, primero en salir', 'Primero en vencer, primero en salir', 'Farmacia Eficiente', 'Fecha Final'], correctIndex: 1, explanation: 'First Expire, First Out.' },
                    { id: 215, topic: 'Legislaci√≥n', text: '¬øQui√©n fiscaliza las farmacias?', options: ['Carabineros', 'SERNAC', 'ISP y SEREMI', 'Municipalidad'], correctIndex: 2, explanation: 'El ISP y las SEREMIS de salud.' }
                ] 
            },
            {
                id: 3, title: 'Nivel 3: Avanzado', desc: 'Atenci√≥n y dispensaci√≥n.', medal: 'Oro', iconBg: 'bg-gradient-to-br from-[#FFD700] to-[#B8860B]', borderColor: 'border-[#FFD700]/50', textColor: 'text-[#B8860B]', qCount: 25, passingScore: 18, examLabel: 'SIMULACRO NIVEL 3',
                topics: ['Dispensaci√≥n', 'Bioequivalencia'],
                questions: [
                    { id: 301, topic: 'Dispensaci√≥n', text: 'Al dispensar un antibi√≥tico, ¬øqu√© es lo m√°s importante?', options: ['Cobrar primero', 'Verificar receta y fecha', 'Ofrecer vitaminas', 'Ver la marca'], correctIndex: 1, explanation: 'Es obligatorio verificar receta y vigencia.' },
                    { id: 302, topic: 'Bioequivalencia', text: 'La franja amarilla en un envase indica:', options: ['Venta Directa', 'Bioequivalencia', 'Uso hospitalario', 'Producto natural'], correctIndex: 1, explanation: 'Medicamento Bioequivalente.' },
                    { id: 303, topic: 'Terminolog√≠a', text: '¬øQu√© significa DCI?', options: ['Denominaci√≥n Com√∫n Internacional', 'Dosis Com√∫n Inyectable', 'Departamento Cl√≠nico Interno', 'Dosis Controlada Individual'], correctIndex: 0, explanation: 'Nombre gen√©rico universal del principio activo.' },
                    { id: 304, topic: 'Formas Farmac√©uticas', text: 'Un medicamento "Forte" generalmente implica:', options: ['Mayor tama√±o', 'Mayor dosis del principio activo', 'Mejor sabor', 'M√°s barato'], correctIndex: 1, explanation: 'Mayor concentraci√≥n.' },
                    { id: 305, topic: 'Atenci√≥n', text: 'Si un paciente pide consejo m√©dico:', options: ['Le recetamos algo suave', 'Lo derivamos al QF o m√©dico', 'Le damos lo que pide', 'Buscamos en Google'], correctIndex: 1, explanation: 'El auxiliar no diagnostica.' },
                    { id: 306, topic: 'Dispensaci√≥n', text: 'Venta de Amoxicilina requiere:', options: ['Receta M√©dica', 'Venta Directa', 'Receta Cheque', 'Ninguna'], correctIndex: 0, explanation: 'Antibi√≥ticos requieren receta.' },
                    { id: 307, topic: 'Bioequivalencia', text: '¬øEl bioequivalente tiene el mismo efecto terap√©utico?', options: ['No, es peor', 'S√≠, comprobado cient√≠ficamente', 'Depende de la marca', 'Solo si es caro'], correctIndex: 1, explanation: 'Esa es la definici√≥n de bioequivalencia.' },
                    { id: 308, topic: 'Formas Farmac√©uticas', text: 'Jarabe es una forma:', options: ['S√≥lida', 'Semis√≥lida', 'L√≠quida', 'Gaseosa'], correctIndex: 2, explanation: 'L√≠quida azucarada.' },
                    { id: 309, topic: 'Atenci√≥n', text: 'Paciente embarazada pide medicamento para dolor:', options: ['Vender Ibuprofeno', 'Vender Paracetamol', 'Consultar al QF', 'Vender Vitaminas'], correctIndex: 2, explanation: 'Poblaci√≥n de riesgo, siempre consultar al QF.' },
                    { id: 310, topic: 'Almacenamiento', text: 'Fotosensibilidad significa:', options: ['Proteger de la humedad', 'Proteger de la luz', 'Refrigerar', 'Agitar'], correctIndex: 1, explanation: 'Sensible a la luz.' },
                    { id: 311, topic: 'Dispensaci√≥n', text: 'Dosis m√°xima de Paracetamol diario adulto:', options: ['1g', '4g', '8g', '2g'], correctIndex: 1, explanation: '4 gramos al d√≠a m√°ximo para evitar da√±o hep√°tico.' },
                    { id: 312, topic: 'Terminolog√≠a', text: 'Posolog√≠a significa:', options: ['Estudio de los venenos', 'Dosis y frecuencia de toma', 'Forma del medicamento', 'Precio'], correctIndex: 1, explanation: 'C√≥mo se debe tomar el medicamento.' },
                    { id: 313, topic: 'Formas Farmac√©uticas', text: 'Supositorio es v√≠a:', options: ['Oral', 'Rectal', 'Vaginal', 'T√≥pica'], correctIndex: 1, explanation: 'V√≠a rectal.' },
                    { id: 314, topic: 'Legislaci√≥n', text: 'Receta de Psicotr√≥picos se retiene:', options: ['Siempre', 'Nunca', 'A veces', 'Solo si el paciente quiere'], correctIndex: 0, explanation: 'Se debe retener para control.' },
                    { id: 315, topic: 'Atenci√≥n', text: 'Cliente reclama por medicamento vencido:', options: ['No hacer nada', 'Llamar al QF', 'Devolver el dinero', 'Cambiarlo sin avisar'], correctIndex: 1, explanation: 'El QF debe manejar la desviaci√≥n de calidad.' },
                    { id: 316, topic: 'Bioequivalencia', text: '¬øLos gen√©ricos son bioequivalentes?', options: ['Todos s√≠', 'Ninguno', 'Solo los que tienen franja amarilla', 'Solo los de marca'], correctIndex: 2, explanation: 'Solo si tienen la certificaci√≥n (franja).' },
                    { id: 317, topic: 'Dispensaci√≥n', text: 'Receta retenida sin fecha:', options: ['Se despacha igual', 'Se pone la fecha de hoy', 'No se despacha', 'Se llama al m√©dico'], correctIndex: 2, explanation: 'Receta incompleta no es v√°lida.' },
                    { id: 318, topic: 'Formas Farmac√©uticas', text: 'Comprimido recubierto sirve para:', options: ['Mejor sabor', 'Proteger el est√≥mago', 'Verse bonito', 'Ser m√°s caro'], correctIndex: 1, explanation: 'Protecci√≥n g√°strica o del f√°rmaco.' },
                    { id: 319, topic: 'Atenci√≥n', text: 'Paciente diab√©tico pide jarabe para la tos:', options: ['Vender cualquiera', 'Vender uno sin az√∫car', 'Vender pastillas', 'Vender miel'], correctIndex: 1, explanation: 'Evitar az√∫car en diab√©ticos.' },
                    { id: 320, topic: 'Almacenamiento', text: 'Medicamentos LASA son:', options: ['Los m√°s caros', 'Los que suenan o se ven igual', 'Los vencidos', 'Los de venta libre'], correctIndex: 1, explanation: 'Look Alike, Sound Alike (riesgo de error).' },
                    { id: 321, topic: 'Dispensaci√≥n', text: '¬øSe puede fraccionar un medicamento?', options: ['Nunca', 'Si la farmacia est√° autorizada', 'Si el cliente quiere', 'Solo antibi√≥ticos'], correctIndex: 1, explanation: 'Requiere autorizaci√≥n y zona de fraccionamiento.' },
                    { id: 322, topic: 'Terminolog√≠a', text: 'Excipiente es:', options: ['El principio activo', 'Sustancia inactiva que da forma', 'El envase', 'La marca'], correctIndex: 1, explanation: 'Veh√≠culo o aditivo.' },
                    { id: 323, topic: 'Legislaci√≥n', text: 'Venta de Sildenafil requiere:', options: ['Receta M√©dica', 'Venta Directa', 'Receta Cheque', 'Carnet'], correctIndex: 0, explanation: 'Condici√≥n de venta bajo receta.' },
                    { id: 324, topic: 'Atenci√≥n', text: 'Uso racional de medicamentos promueve:', options: ['Vender m√°s', 'Usar el medicamento adecuado al menor costo posible', 'No tomar remedios', 'Usar solo naturales'], correctIndex: 1, explanation: 'Definici√≥n de la OMS.' },
                    { id: 325, topic: 'Bioequivalencia', text: 'El estudio de bioequivalencia compara:', options: ['Precios', 'Biodisponibilidad con el referente', 'Colores de caja', 'Tama√±o de pastilla'], correctIndex: 1, explanation: 'Comparaci√≥n de curvas plasm√°ticas.' }
                ] 
            },
            {
                id: 4, title: 'Nivel 4: Final (Simulacro)', desc: 'Posolog√≠a y c√°lculos.', medal: 'Platino', iconBg: 'bg-gradient-to-br from-[#E5E4E2] to-[#607D8B]', borderColor: 'border-[#607D8B]/50', textColor: 'text-[#455A64]', qCount: 20, passingScore: 14, topics: ['C√°lculos', 'Posolog√≠a'], examLabel: 'SIMULACRO FINAL',
                questions: [
                    { id: 401, topic: 'C√°lculos', text: 'Si la dosis es 500mg y tengo comprimidos de 250mg, ¬øcu√°ntos dispenso?', options: ['1', '1.5', '2', '3'], correctIndex: 2, explanation: '500/250 = 2 comprimidos.' },
                    { id: 402, topic: 'Posolog√≠a', text: '¬øCu√°ntos ml hay en una cuchara de t√© (medida est√°ndar)?', options: ['2.5 ml', '5 ml', '10 ml', '15 ml'], correctIndex: 1, explanation: '5 ml.' },
                    { id: 403, topic: 'C√°lculos', text: 'Si un jarabe trae 120ml y la dosis es 10ml cada 8 horas, ¬øcu√°nto dura?', options: ['2 d√≠as', '3 d√≠as', '4 d√≠as', '5 d√≠as'], correctIndex: 2, explanation: '30ml diarios. 120/30 = 4 d√≠as.' },
                    { id: 404, topic: 'Preparados', text: 'Para preparar 100ml de alcohol al 70% a partir de 96%, necesito:', options: ['M√°s agua que alcohol', 'Solo alcohol', 'C√°lculo de diluci√≥n', 'Mezclar partes iguales'], correctIndex: 2, explanation: 'Se usa la f√≥rmula de diluci√≥n.' },
                    { id: 405, topic: 'Posolog√≠a', text: 'Dosis "SOS" significa:', options: ['Solo por la ma√±ana', 'En caso de necesidad', 'Sin otro s√≠ntoma', 'Siempre o siempre'], correctIndex: 1, explanation: 'Si los s√≠ntomas aparecen.' },
                    { id: 406, topic: 'C√°lculos', text: 'Receta: 1 comp cada 12 horas por 7 d√≠as. ¬øCu√°ntos comprimidos total?', options: ['7', '10', '14', '21'], correctIndex: 2, explanation: '2 por d√≠a x 7 d√≠as = 14.' },
                    { id: 407, topic: 'C√°lculos', text: 'Dosis: 5ml cada 8 horas. ¬øVolumen diario total?', options: ['10 ml', '15 ml', '20 ml', '5 ml'], correctIndex: 1, explanation: '5ml x 3 veces = 15ml.' },
                    { id: 408, topic: 'Posolog√≠a', text: '1 comprimido "antes de las comidas" es:', options: ['Postprandial', 'Preprandial', 'Ayunas', 'Con agua'], correctIndex: 1, explanation: 'Preprandial.' },
                    { id: 409, topic: 'C√°lculos', text: 'Paciente necesita 1g de antibi√≥tico al d√≠a. Comprimidos son de 500mg. ¬øDosis diaria?', options: ['1 comp', '2 comp', '3 comp', '4 comp'], correctIndex: 3, explanation: '1g = 1000mg. 1000/500 = 2 comp por dosis... espera, 1g al D√çA. Si es dosis √∫nica diaria son 2 comp juntos. Si es repartido depende. Asumiendo dosis total diaria 1g -> 2 comp de 500mg.' },
                    { id: 410, topic: 'Gesti√≥n', text: 'Si el stock m√≠nimo es 5 y tengo 2, ¬øqu√© hago?', options: ['Vender los 2', 'Pedir reposici√≥n', 'Esconderlos', 'Nada'], correctIndex: 1, explanation: 'Solicitar pedido.' },
                    { id: 411, topic: 'C√°lculos', text: 'Gotas: 20 gotas equivalen aprox a:', options: ['0.5 ml', '1 ml', '2 ml', '5 ml'], correctIndex: 1, explanation: 'Est√°ndar: 20 gotas = 1 ml.' },
                    { id: 412, topic: 'Posolog√≠a', text: 'Cada 6 horas significa cu√°ntas veces al d√≠a:', options: ['3 veces', '4 veces', '6 veces', '2 veces'], correctIndex: 1, explanation: '24 horas / 6 = 4 tomas.' },
                    { id: 413, topic: 'C√°lculos', text: 'Caja de 30 comp. Dosis 1 al d√≠a. ¬øCu√°nto dura?', options: ['15 d√≠as', '1 mes', '2 meses', '1 semana'], correctIndex: 1, explanation: '30 d√≠as.' },
                    { id: 414, topic: 'Posolog√≠a', text: 'V√≠a √≥tica se aplica en:', options: ['Ojos', 'O√≠dos', 'Nariz', 'Boca'], correctIndex: 1, explanation: 'O√≠dos.' },
                    { id: 415, topic: 'C√°lculos', text: 'Receta pide 60mg. Tengo pastillas de 20mg. ¬øCu√°ntas doy?', options: ['1', '2', '3', '4'], correctIndex: 2, explanation: '60 / 20 = 3.' },
                    { id: 416, topic: 'Posolog√≠a', text: 'Uso t√≥pico significa:', options: ['Tragar', 'Inyectar', 'Aplicar sobre piel/mucosa', 'Inhalar'], correctIndex: 2, explanation: 'Externo local.' },
                    { id: 417, topic: 'C√°lculos', text: 'Si vendo 10 cajas a $1.000 cada una, total:', options: ['$1.000', '$5.000', '$10.000', '$100.000'], correctIndex: 2, explanation: 'C√°lculo simple de caja.' },
                    { id: 418, topic: 'Posolog√≠a', text: 'Ayunas significa:', options: ['Con leche', 'Sin alimentos (est√≥mago vac√≠o)', 'Al acostarse', 'Con almuerzo'], correctIndex: 1, explanation: 'Sin alimentos.' },
                    { id: 419, topic: 'C√°lculos', text: 'Dosis 2 puff cada 12 horas. Un inhalador de 200 dosis dura:', options: ['25 d√≠as', '50 d√≠as', '100 d√≠as', '10 d√≠as'], correctIndex: 1, explanation: '4 puff diarios. 200/4 = 50 d√≠as.' },
                    { id: 420, topic: 'Gesti√≥n', text: 'Diferencia de inventario:', options: ['Lo que sobra', 'Lo que falta', 'Diferencia entre sistema y f√≠sico', 'Ventas del d√≠a'], correctIndex: 2, explanation: 'Discrepancia de stock.' }
                ] 
            }
        ];

        // --- PDFS ---
        const PDF_DOCS = [
            { title: 'Ley 20.724 (Ley de F√°rmacos)', desc: 'Modifica el C√≥digo Sanitario', file: 'ley_20724.pdf' },
            { title: 'Decreto Supremo 466', desc: 'Reglamento de Farmacias', file: 'decreto_466.pdf' },
            { title: 'Decreto Supremo 404', desc: 'Reglamento de Estupefacientes', file: 'decreto_404.pdf' },
            { title: 'Decreto Supremo 405', desc: 'Reglamento de Psicotr√≥picos', file: 'decreto_405.pdf' }
        ];

        // --- COMPONENTES UI (Sin cambios) ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const map = {
                'user': 'ph-user', 'shield': 'ph-shield-check', 'lock': 'ph-lock', 'check-circle': 'ph-check-circle',
                'book': 'ph-book-open', 'book-open': 'ph-book-open', 'arrow-left': 'ph-arrow-left', 'x': 'ph-x', 'caret-right': 'ph-caret-right',
                'caret-down': 'ph-caret-down', 'files': 'ph-files', 'users': 'ph-users', 'house': 'ph-house', 
                'file-pdf': 'ph-file-pdf', 'trophy': 'ph-trophy', 'warning': 'ph-warning-circle', 'eye': 'ph-eye', 
                'refresh': 'ph-arrows-clockwise', 'whatsapp': 'ph-whatsapp-logo', 'facebook': 'ph-facebook-logo', 
                'download': 'ph-download-simple', 'student': 'ph-student', 'question': 'ph-question', 'medal': 'ph-medal', 
                'power': 'ph-power', 'coffee': 'ph-coffee', 'chat-circle': 'ph-chat-circle', 'article': 'ph-article', 'brain': 'ph-brain'
            };
            return <i className={`${map[name] || 'ph-circle'} ${className}`} style={{ fontSize: size }}></i>;
        };

        const Button = ({ onClick, children, variant = 'primary', className = '', fullWidth = false }) => {
            const base = "flex items-center justify-center gap-2 px-5 py-3.5 rounded-xl font-bold transition-all active:scale-95 text-sm md:text-base";
            const variants = {
                primary: "bg-slate-900 text-white hover:bg-slate-800 shadow-lg hover:shadow-xl",
                secondary: "bg-farmacia-green text-white hover:bg-green-600 shadow-md",
                outline: "bg-white border-2 border-slate-200 text-slate-600 hover:border-farmacia-green hover:text-farmacia-green",
                ghost: "text-slate-500 hover:bg-slate-100",
                danger: "bg-red-50 text-red-500 hover:bg-red-100 border border-red-100"
            };
            return <button onClick={onClick} className={`${base} ${variants[variant]} ${fullWidth ? 'w-full' : ''} ${className}`}>{children}</button>;
        };

        const Accordion = ({ title, content }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="border-b border-slate-100 last:border-0">
                    <button onClick={() => setIsOpen(!isOpen)} className="w-full flex justify-between items-center py-4 text-left font-medium text-slate-700 hover:text-farmacia-green transition-colors">
                        {title}
                        <Icon name="caret-down" className={`transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
                    </button>
                    <div className={`overflow-hidden transition-all duration-300 ${isOpen ? 'max-h-96 pb-4' : 'max-h-0'}`}>
                        <div className="text-sm text-slate-500 leading-relaxed html-content" dangerouslySetInnerHTML={{__html: content}}></div>
                    </div>
                </div>
            );
        };

        // --- APP PRINCIPAL ---
        function App() {
            const [view, setView] = useState('LANDING'); 
            const [user, setUser] = useState({ name: '', currentLevel: 1, completedLevels: [], isAuthenticated: false });
            const [quizState, setQuizState] = useState({ active: false, levelId: null, qIndex: 0, score: 0, showResult: false, answers: [] });
            const [reviewMode, setReviewMode] = useState(false);
            const [activeModal, setActiveModal] = useState(null); 
            const [authMode, setAuthMode] = useState('login');
            const [legalTab, setLegalTab] = useState('terms');
            const [selectedArticle, setSelectedArticle] = useState(null);

            useEffect(() => {
                const unsubscribe = onAuthStateChanged(auth, (u) => {
                    if (u) {
                        const ref = doc(db, 'artifacts', appId, 'users', u.uid, 'data', 'progress');
                        onSnapshot(ref, (snap) => {
                            if (snap.exists()) {
                                const d = snap.data();
                                setUser({ ...d, uid: u.uid, isAuthenticated: true });
                            } else {
                                setUser({ name: u.displayName || 'Colega', currentLevel: 1, completedLevels: [], isAuthenticated: true, uid: u.uid });
                            }
                        });
                    } else {
                        const local = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY) || '{}');
                        if (local.isAuthenticated) setUser(local);
                    }
                });
                return () => unsubscribe();
            }, []);

            const saveProgress = async (newLevel, newCompleted) => {
                const updatedUser = { ...user, currentLevel: newLevel, completedLevels: newCompleted };
                setUser(updatedUser);
                localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updatedUser));
                if (user.uid) {
                    try { await setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'progress'), updatedUser, { merge: true }); } catch(e) {}
                }
            };

            const goBack = () => {
                if (view === 'ARTICLE') setView('BLOG');
                else if (user.isAuthenticated) setView('DASHBOARD');
                else setView('LANDING');
            };

            // ... [VISTAS LANDING, DASHBOARD, BLOG, ETC - IGUAL QUE ANTES] ...
            // Mantenemos la misma estructura de renderizado pero usando los nuevos LEVELS con preguntas √∫nicas.

            const renderLanding = () => (
                <div className="flex-1 flex flex-col animate-fade-in overflow-y-auto relative z-10 bg-white">
                    <header className="w-full py-4 px-6 flex justify-between items-center border-b border-slate-100 bg-white/95 backdrop-blur-sm sticky top-0 z-30 shadow-sm">
                        <div className="flex items-center gap-2 text-xl font-heading font-bold text-slate-800 cursor-pointer" onClick={() => setView('LANDING')}>
                             <Icon name="brain" size={32} className="text-farmacia-green mr-1" weight="fill" />
                             <span>Auxiliar<span className="text-farmacia-green">Pro</span></span>
                        </div>
                        <div className="flex items-center gap-2">
                            <button onClick={() => setView('BLOG')} className="text-sm font-bold text-slate-500 hover:text-farmacia-green transition-colors mr-2 hidden md:block">Blog</button>
                            <button onClick={() => user.isAuthenticated ? setView('DASHBOARD') : setActiveModal('auth')} className="text-sm font-bold text-slate-500 hover:text-farmacia-green transition-colors">
                                {user.isAuthenticated ? 'Ir a mi Panel' : 'Ingresar'}
                            </button>
                        </div>
                    </header>
                    <main className="flex-1 flex flex-col">
                        <section className="px-6 py-10 text-center max-w-lg mx-auto">
                            <div className="inline-flex items-center gap-2 bg-emerald-50 border border-emerald-100 text-emerald-700 text-[10px] font-bold px-3 py-1.5 rounded-full mb-6 tracking-wide shadow-sm">
                                <span className="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span> META: CREDENCIAL 2026
                            </div>
                            <h1 className="text-4xl md:text-5xl font-extrabold text-slate-900 mb-6 leading-tight tracking-tight">
                                Prep√°rate para tu <br/><span className="text-transparent bg-clip-text bg-gradient-to-r from-farmacia-green to-emerald-600">Examen de Auxiliar</span>
                            </h1>
                            <div className="space-y-3 w-full max-w-xs mx-auto">
                                <Button fullWidth onClick={() => user.isAuthenticated ? setView('DASHBOARD') : setActiveModal('auth')}>
                                    Comenzar Ahora <Icon name="caret-right" />
                                </Button>
                                <Button variant="outline" fullWidth onClick={() => setView('BLOG')}>
                                    <Icon name="article" /> Ir a leer Art√≠culos
                                </Button>
                            </div>
                        </section>
                        <section className="bg-slate-50 py-12 px-6 border-y border-slate-100">
                            <div className="max-w-md mx-auto">
                                <div className="flex items-center gap-4 mb-6">
                                    <div className="w-12 h-12 bg-white rounded-full flex items-center justify-center text-slate-700 shadow-sm border border-slate-100 text-xl"><Icon name="student" /></div>
                                    <div>
                                        <h3 className="font-bold text-slate-800">Hola, soy Marcelo</h3>
                                        <p className="text-xs text-slate-500 uppercase tracking-wider font-bold">Auxiliar Trainee</p>
                                    </div>
                                </div>
                                <p className="text-slate-600 text-sm leading-relaxed">
                                    <strong>AuxiliarPro</strong> se cre√≥ bajo la convicci√≥n de que el conocimiento
